{"format_version":"1.2","terraform_version":"1.12.2","variables":{"api_container_port":{"value":8080},"api_cpu":{"value":"512"},"api_cpu_target":{"value":70},"api_desired_count":{"value":2},"api_enable_autoscaling":{"value":true},"api_environment":{"value":{}},"api_health_check_path":{"value":"/health"},"api_max_capacity":{"value":10},"api_memory":{"value":"1024"},"api_min_capacity":{"value":1},"availability_zones":{"value":["eu-west-1a","eu-west-1b"]},"aws_region":{"value":"eu-west-1"},"certificate_arn":{"value":null},"common_tags":{"value":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"create_nat_gateway":{"value":true},"enable_deletion_protection":{"value":false},"enable_https":{"value":false},"frontend_container_port":{"value":3000},"frontend_cpu":{"value":"256"},"frontend_cpu_target":{"value":70},"frontend_desired_count":{"value":2},"frontend_enable_autoscaling":{"value":true},"frontend_environment":{"value":{}},"frontend_health_check_path":{"value":"/"},"frontend_max_capacity":{"value":10},"frontend_memory":{"value":"512"},"frontend_min_capacity":{"value":1},"model_bucket_name":{"value":"sagemaker-whisper-models-654654436000-eu-west-1"},"model_data_url":{"value":"s3://sagemaker-models-654654436000-eu-west-1/whisper-large-v3-turbo/model.tar.gz"},"private_subnet_cidrs":{"value":["10.0.11.0/24","10.0.12.0/24"]},"project_name":{"value":"whisper-sagemaker"},"public_subnet_cidrs":{"value":["10.0.1.0/24","10.0.2.0/24"]},"sagemaker_enable_autoscaling":{"value":true},"sagemaker_initial_instance_count":{"value":1},"sagemaker_instance_type":{"value":"ml.g4dn.xlarge"},"sagemaker_max_capacity":{"value":3},"sagemaker_min_capacity":{"value":1},"sagemaker_target_invocations":{"value":1000},"vpc_cidr":{"value":"10.0.0.0/16"}},"planned_values":{"outputs":{"alb_dns_name":{"sensitive":false},"alb_url":{"sensitive":false},"api_service_name":{"sensitive":false,"type":"string","value":"whisper-sagemaker-api-service"},"cloudwatch_dashboard_name":{"sensitive":false,"type":"string","value":"whisper-sagemaker-dashboard"},"cloudwatch_log_group":{"sensitive":false,"type":"string","value":"/ecs/whisper-sagemaker"},"deployment_summary":{"sensitive":false},"ecr_api_repository_url":{"sensitive":false},"ecr_frontend_repository_url":{"sensitive":false},"ecs_cluster_arn":{"sensitive":false},"ecs_cluster_name":{"sensitive":false,"type":"string","value":"whisper-sagemaker-cluster"},"frontend_service_name":{"sensitive":false,"type":"string","value":"whisper-sagemaker-frontend-service"},"sagemaker_endpoint_arn":{"sensitive":false},"sagemaker_endpoint_name":{"sensitive":false,"type":"string","value":"whisper-sagemaker-whisper-endpoint"},"sagemaker_model_name":{"sensitive":false,"type":"string","value":"whisper-sagemaker-whisper-model"},"vpc_id":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_cloudwatch_dashboard.main","mode":"managed","type":"aws_cloudwatch_dashboard","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dashboard_name":"whisper-sagemaker-dashboard"},"sensitive_values":{}}],"child_modules":[{"resources":[{"address":"module.ecr_api.aws_ecr_lifecycle_policy.default[0]","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire untagged images older than 7 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":7,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}},{\"action\":{\"type\":\"expire\"},\"description\":\"Keep last 30 images\",\"rulePriority\":2,\"selection\":{\"countNumber\":30,\"countType\":\"imageCountMoreThan\",\"tagStatus\":\"any\"}}]}","repository":"whisper-sagemaker-api"},"sensitive_values":{}},{"address":"module.ecr_api.aws_ecr_repository.this","mode":"managed","type":"aws_ecr_repository","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[{"encryption_type":"AES256"}],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"whisper-sagemaker-api","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"encryption_configuration":[{}],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}}],"address":"module.ecr_api"},{"resources":[{"address":"module.ecr_frontend.aws_ecr_lifecycle_policy.default[0]","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire untagged images older than 7 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":7,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}},{\"action\":{\"type\":\"expire\"},\"description\":\"Keep last 30 images\",\"rulePriority\":2,\"selection\":{\"countNumber\":30,\"countType\":\"imageCountMoreThan\",\"tagStatus\":\"any\"}}]}","repository":"whisper-sagemaker-frontend"},"sensitive_values":{}},{"address":"module.ecr_frontend.aws_ecr_repository.this","mode":"managed","type":"aws_ecr_repository","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[{"encryption_type":"AES256"}],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"whisper-sagemaker-frontend","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"encryption_configuration":[{}],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}}],"address":"module.ecr_frontend"},{"resources":[{"address":"module.ecs.aws_appautoscaling_policy.api_cpu[0]","mode":"managed","type":"aws_appautoscaling_policy","name":"api_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"whisper-sagemaker-api-cpu-autoscaling","policy_type":"TargetTrackingScaling","resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-api-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":null}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":70}]},"sensitive_values":{"alarm_arns":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}},{"address":"module.ecs.aws_appautoscaling_policy.frontend_cpu[0]","mode":"managed","type":"aws_appautoscaling_policy","name":"frontend_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"whisper-sagemaker-frontend-cpu-autoscaling","policy_type":"TargetTrackingScaling","resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":null}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":70}]},"sensitive_values":{"alarm_arns":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}},{"address":"module.ecs.aws_appautoscaling_target.api[0]","mode":"managed","type":"aws_appautoscaling_target","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"max_capacity":10,"min_capacity":1,"resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-api-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","tags":null,"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"sensitive_values":{"suspended_state":[],"tags_all":{}}},{"address":"module.ecs.aws_appautoscaling_target.frontend[0]","mode":"managed","type":"aws_appautoscaling_target","name":"frontend","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"max_capacity":10,"min_capacity":1,"resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","tags":null,"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"sensitive_values":{"suspended_state":[],"tags_all":{}}},{"address":"module.ecs.aws_cloudwatch_log_group.ecs_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"ecs_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"/ecs/whisper-sagemaker","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-logs","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-logs","Project":"whisper-sagemaker"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.ecs.aws_ecs_cluster.main","mode":"managed","type":"aws_ecs_cluster","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"configuration":[],"name":"whisper-sagemaker-cluster","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-cluster","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-cluster","Project":"whisper-sagemaker"}},"sensitive_values":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}}},{"address":"module.ecs.aws_ecs_service.api","mode":"managed","type":"aws_ecs_service","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":2,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[{"container_name":"api","container_port":8080,"elb_name":""}],"name":"whisper-sagemaker-api-service","network_configuration":[{"assign_public_ip":false}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-service","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-service","Project":"whisper-sagemaker"},"timeouts":null,"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"load_balancer":[{}],"network_configuration":[{"security_groups":[],"subnets":[]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}},{"address":"module.ecs.aws_ecs_service.frontend","mode":"managed","type":"aws_ecs_service","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":2,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[{"container_name":"frontend","container_port":3000,"elb_name":""}],"name":"whisper-sagemaker-frontend-service","network_configuration":[{"assign_public_ip":false}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-service","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-service","Project":"whisper-sagemaker"},"timeouts":null,"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"load_balancer":[{}],"network_configuration":[{"security_groups":[],"subnets":[]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}},{"address":"module.ecs.aws_ecs_task_definition.api","mode":"managed","type":"aws_ecs_task_definition","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"cpu":"512","ephemeral_storage":[],"family":"whisper-sagemaker-api","inference_accelerator":[],"ipc_mode":null,"memory":"1024","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"runtime_platform":[],"skip_destroy":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-task","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-task","Project":"whisper-sagemaker"},"track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}},{"address":"module.ecs.aws_ecs_task_definition.frontend","mode":"managed","type":"aws_ecs_task_definition","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"cpu":"256","ephemeral_storage":[],"family":"whisper-sagemaker-frontend","inference_accelerator":[],"ipc_mode":null,"memory":"512","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"runtime_platform":[],"skip_destroy":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-task","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-task","Project":"whisper-sagemaker"},"track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}},{"address":"module.ecs.aws_iam_role.task_execution_role","mode":"managed","type":"aws_iam_role","name":"task_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"whisper-sagemaker-ecs-task-execution-role","path":"/","permissions_boundary":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-execution-role","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-execution-role","Project":"whisper-sagemaker"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.ecs.aws_iam_role.task_role","mode":"managed","type":"aws_iam_role","name":"task_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"whisper-sagemaker-ecs-task-role","path":"/","permissions_boundary":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-role","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-role","Project":"whisper-sagemaker"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.ecs.aws_iam_role_policy.sagemaker_invoke_policy","mode":"managed","type":"aws_iam_role_policy","name":"sagemaker_invoke_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"whisper-sagemaker-sagemaker-invoke-policy"},"sensitive_values":{}},{"address":"module.ecs.aws_iam_role_policy_attachment.task_execution_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"task_execution_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"whisper-sagemaker-ecs-task-execution-role"},"sensitive_values":{}}],"address":"module.ecs"},{"resources":[{"address":"module.networking.aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-1","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-1","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_eip.nat[1]","mode":"managed","type":"aws_eip","name":"nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-2","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-2","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_internet_gateway.main","mode":"managed","type":"aws_internet_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-igw","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-igw","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_lb.main","mode":"managed","type":"aws_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"whisper-sagemaker-alb","preserve_host_header":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb","Project":"whisper-sagemaker"},"timeouts":null,"xff_header_processing_mode":"append"},"sensitive_values":{"access_logs":[],"connection_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[],"target_group":[{"weight":1}]}],"redirect":[],"target_group_arn":null,"type":"forward"}],"port":80,"protocol":"HTTP","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-http-listener","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-http-listener","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[],"target_group":[{}]}],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_lb_listener_rule.api_http","mode":"managed","type":"aws_lb_listener_rule","name":"api_http","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["/api/*","/health","/status/*","/transcribe"]}],"query_string":[],"source_ip":[]}],"priority":100,"tags":null,"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"sensitive_values":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false,false,false,false]}],"query_string":[],"source_ip":[]}],"tags_all":{}}},{"address":"module.networking.aws_lb_target_group.api","mode":"managed","type":"aws_lb_target_group","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":"30","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"lambda_multi_value_headers_enabled":false,"name":"whisper-sagemaker-api-tg","port":8080,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-tg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-tg","Project":"whisper-sagemaker"},"target_type":"ip"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}},{"address":"module.networking.aws_lb_target_group.frontend","mode":"managed","type":"aws_lb_target_group","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":"30","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"lambda_multi_value_headers_enabled":false,"name":"whisper-sagemaker-frontend-tg","port":3000,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-tg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-tg","Project":"whisper-sagemaker"},"target_type":"ip"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}},{"address":"module.networking.aws_nat_gateway.main[0]","mode":"managed","type":"aws_nat_gateway","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-1","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-1","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_nat_gateway.main[1]","mode":"managed","type":"aws_nat_gateway","name":"main","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-2","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-2","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_route.private_nat[0]","mode":"managed","type":"aws_route","name":"private_nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"module.networking.aws_route.private_nat[1]","mode":"managed","type":"aws_route","name":"private_nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"module.networking.aws_route.public_internet","mode":"managed","type":"aws_route","name":"public_internet","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"module.networking.aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-1","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-1","Project":"whisper-sagemaker","Type":"private"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_route_table.private[1]","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-2","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-2","Project":"whisper-sagemaker","Type":"private"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-rt","Project":"whisper-sagemaker","Type":"public"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-rt","Project":"whisper-sagemaker","Type":"public"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.networking.aws_route_table_association.private[1]","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.networking.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.networking.aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.networking.aws_security_group.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for Application Load Balancer","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from anywhere","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"HTTPS from anywhere","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name_prefix":"whisper-sagemaker-alb-","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb-sg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb-sg","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_security_group.ecs","mode":"managed","type":"aws_security_group","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for ECS tasks","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow traffic from ALB","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":65535}],"name_prefix":"whisper-sagemaker-ecs-","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-sg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-sg","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_security_group.sagemaker","mode":"managed","type":"aws_security_group","name":"sagemaker","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for SageMaker endpoints","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow traffic from ECS tasks","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443}],"name_prefix":"whisper-sagemaker-sagemaker-","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-sg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-sg","Project":"whisper-sagemaker"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1a","cidr_block":"10.0.11.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-1","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-1","Project":"whisper-sagemaker","Type":"private"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1b","cidr_block":"10.0.12.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-2","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-2","Project":"whisper-sagemaker","Type":"private"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1a","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-1","Project":"whisper-sagemaker","Type":"public"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-1","Project":"whisper-sagemaker","Type":"public"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1b","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-2","Project":"whisper-sagemaker","Type":"public"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-2","Project":"whisper-sagemaker","Type":"public"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-vpc","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-vpc","Project":"whisper-sagemaker"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_vpc_endpoint.s3","mode":"managed","type":"aws_vpc_endpoint","name":"s3","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-west-1.s3","service_network_arn":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-s3-endpoint","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-s3-endpoint","Project":"whisper-sagemaker"},"timeouts":null,"vpc_endpoint_type":"Gateway"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}],"address":"module.networking"},{"resources":[{"address":"module.sagemaker.aws_appautoscaling_policy.sagemaker_policy[0]","mode":"managed","type":"aws_appautoscaling_policy","name":"sagemaker_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"whisper-sagemaker-sagemaker-autoscaling-policy","policy_type":"TargetTrackingScaling","resource_id":"endpoint/whisper-sagemaker-whisper-endpoint/variant/AllTraffic","scalable_dimension":"sagemaker:variant:DesiredInstanceCount","service_namespace":"sagemaker","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"SageMakerVariantInvocationsPerInstance","resource_label":null}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":1000}]},"sensitive_values":{"alarm_arns":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}},{"address":"module.sagemaker.aws_appautoscaling_target.sagemaker_target[0]","mode":"managed","type":"aws_appautoscaling_target","name":"sagemaker_target","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"max_capacity":3,"min_capacity":1,"resource_id":"endpoint/whisper-sagemaker-whisper-endpoint/variant/AllTraffic","scalable_dimension":"sagemaker:variant:DesiredInstanceCount","service_namespace":"sagemaker","tags":null,"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"sensitive_values":{"suspended_state":[],"tags_all":{}}},{"address":"module.sagemaker.aws_cloudwatch_metric_alarm.model_invocation_errors","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"model_invocation_errors","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"This metric monitors SageMaker model invocation errors","alarm_name":"whisper-sagemaker-sagemaker-invocation-errors","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"dimensions":{"EndpointName":"whisper-sagemaker-whisper-endpoint","VariantName":"AllTraffic"},"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"ModelInvocationErrors","metric_query":[],"namespace":"AWS/SageMaker","ok_actions":null,"period":60,"statistic":"Sum","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-invocation-errors","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-invocation-errors","Project":"whisper-sagemaker"},"threshold":5,"threshold_metric_id":null,"treat_missing_data":"notBreaching","unit":null},"sensitive_values":{"dimensions":{},"metric_query":[],"tags":{},"tags_all":{}}},{"address":"module.sagemaker.aws_cloudwatch_metric_alarm.model_latency","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"model_latency","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"This metric monitors SageMaker model latency","alarm_name":"whisper-sagemaker-sagemaker-high-latency","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"dimensions":{"EndpointName":"whisper-sagemaker-whisper-endpoint","VariantName":"AllTraffic"},"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"ModelLatency","metric_query":[],"namespace":"AWS/SageMaker","ok_actions":null,"period":60,"statistic":"Average","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-high-latency","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-high-latency","Project":"whisper-sagemaker"},"threshold":30000,"threshold_metric_id":null,"treat_missing_data":"notBreaching","unit":null},"sensitive_values":{"dimensions":{},"metric_query":[],"tags":{},"tags_all":{}}},{"address":"module.sagemaker.aws_iam_role.sagemaker_execution","mode":"managed","type":"aws_iam_role","name":"sagemaker_execution","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"sagemaker.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"whisper-sagemaker-sagemaker-execution-role","path":"/","permissions_boundary":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-execution-role","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-execution-role","Project":"whisper-sagemaker"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.sagemaker.aws_iam_role_policy.sagemaker_s3_access","mode":"managed","type":"aws_iam_role_policy","name":"sagemaker_s3_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"whisper-sagemaker-sagemaker-s3-policy","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::sagemaker-whisper-models-654654436000-eu-west-1\",\"arn:aws:s3:::sagemaker-whisper-models-654654436000-eu-west-1/*\"]},{\"Action\":[\"ecr:GetAuthorizationToken\",\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}"},"sensitive_values":{}},{"address":"module.sagemaker.aws_iam_role_policy_attachment.sagemaker_full_access","mode":"managed","type":"aws_iam_role_policy_attachment","name":"sagemaker_full_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSageMakerFullAccess","role":"whisper-sagemaker-sagemaker-execution-role"},"sensitive_values":{}},{"address":"module.sagemaker.aws_sagemaker_endpoint.whisper","mode":"managed","type":"aws_sagemaker_endpoint","name":"whisper","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deployment_config":[],"endpoint_config_name":"whisper-sagemaker-whisper-endpoint-config","name":"whisper-sagemaker-whisper-endpoint","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint","Project":"whisper-sagemaker"}},"sensitive_values":{"deployment_config":[],"tags":{},"tags_all":{}}},{"address":"module.sagemaker.aws_sagemaker_endpoint_configuration.whisper","mode":"managed","type":"aws_sagemaker_endpoint_configuration","name":"whisper","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"async_inference_config":[],"data_capture_config":[],"kms_key_arn":null,"name":"whisper-sagemaker-whisper-endpoint-config","production_variants":[{"accelerator_type":null,"container_startup_health_check_timeout_in_seconds":null,"core_dump_config":[],"enable_ssm_access":null,"inference_ami_version":null,"initial_instance_count":1,"initial_variant_weight":1,"instance_type":"ml.g4dn.xlarge","managed_instance_scaling":[],"model_data_download_timeout_in_seconds":null,"model_name":"whisper-sagemaker-whisper-model","routing_config":[],"serverless_config":[],"variant_name":"AllTraffic"}],"shadow_production_variants":[],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint-config","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint-config","Project":"whisper-sagemaker"}},"sensitive_values":{"async_inference_config":[],"data_capture_config":[],"production_variants":[{"core_dump_config":[],"managed_instance_scaling":[],"routing_config":[],"serverless_config":[]}],"shadow_production_variants":[],"tags":{},"tags_all":{}}},{"address":"module.sagemaker.aws_sagemaker_model.whisper","mode":"managed","type":"aws_sagemaker_model","name":"whisper","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"container":[],"enable_network_isolation":null,"name":"whisper-sagemaker-whisper-model","primary_container":[{"container_hostname":null,"environment":null,"image":"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-inference:latest","image_config":[],"inference_specification_name":null,"mode":"SingleModel","model_data_url":"s3://sagemaker-models-654654436000-eu-west-1/whisper-large-v3-turbo/model.tar.gz","model_package_name":null,"multi_model_config":[]}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-model","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-model","Project":"whisper-sagemaker"},"vpc_config":[{}]},"sensitive_values":{"container":[],"inference_execution_config":[],"primary_container":[{"image_config":[],"model_data_source":[],"multi_model_config":[]}],"tags":{},"tags_all":{},"vpc_config":[{"security_group_ids":[],"subnets":[]}]}}],"address":"module.sagemaker"}]}},"resource_drift":[{"address":"aws_cloudwatch_dashboard.main","mode":"managed","type":"aws_cloudwatch_dashboard","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"dashboard_arn":"arn:aws:cloudwatch::654654436000:dashboard/whisper-sagemaker-dashboard","dashboard_body":"{\"widgets\":[{\"properties\":{\"metrics\":[[\"AWS/SageMaker\",\"ModelLatency\",{\"label\":\"Avg Latency\",\"stat\":\"Average\"}],[\"...\",{\"label\":\"Max Latency\",\"stat\":\"Maximum\"}]],\"period\":300,\"region\":\"eu-west-1\",\"stat\":\"Average\",\"title\":\"SageMaker Model Latency\",\"yAxis\":{\"left\":{\"label\":\"Milliseconds\"}}},\"type\":\"metric\"},{\"properties\":{\"metrics\":[[\"AWS/SageMaker\",\"Invocations\",{\"label\":\"Total Invocations\",\"stat\":\"Sum\"}],[\".\",\"ModelInvocationErrors\",{\"label\":\"Errors\",\"stat\":\"Sum\"}]],\"period\":300,\"region\":\"eu-west-1\",\"stat\":\"Sum\",\"title\":\"SageMaker Invocations\"},\"type\":\"metric\"},{\"properties\":{\"metrics\":[[\"AWS/ECS\",\"CPUUtilization\",\"ServiceName\",\"whisper-sagemaker-api-service\",\"ClusterName\",\"whisper-sagemaker-cluster\",{\"label\":\"API CPU\",\"stat\":\"Average\"}],[\"...\",\"whisper-sagemaker-frontend-service\",\".\",\".\",{\"label\":\"Frontend CPU\",\"stat\":\"Average\"}]],\"period\":300,\"region\":\"eu-west-1\",\"stat\":\"Average\",\"title\":\"ECS CPU Utilization\",\"yAxis\":{\"left\":{\"label\":\"Percent\"}}},\"type\":\"metric\"},{\"properties\":{\"metrics\":[[\"AWS/ApplicationELB\",\"TargetResponseTime\",\"LoadBalancer\",\"arn:aws:elasticloadbalancing:eu-west-1:654654436000:loadbalancer/app/whisper-sagemaker-alb/bac4e17c5c3a8f62\",{\"label\":\"Response Time\",\"stat\":\"Average\"}],[\".\",\"RequestCount\",\".\",\".\",{\"label\":\"Request Count\",\"stat\":\"Sum\"}]],\"period\":300,\"region\":\"eu-west-1\",\"stat\":\"Average\",\"title\":\"ALB Metrics\"},\"type\":\"metric\"}]}","dashboard_name":"whisper-sagemaker-dashboard","id":"whisper-sagemaker-dashboard"},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.ecr_api.aws_ecr_lifecycle_policy.default[0]","module_address":"module.ecr_api","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"id":"whisper-sagemaker-api","policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire untagged images older than 7 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":7,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}},{\"action\":{\"type\":\"expire\"},\"description\":\"Keep last 30 images\",\"rulePriority\":2,\"selection\":{\"countNumber\":30,\"countType\":\"imageCountMoreThan\",\"tagStatus\":\"any\"}}]}","registry_id":"654654436000","repository":"whisper-sagemaker-api"},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.ecr_api.aws_ecr_repository.this","module_address":"module.ecr_api","mode":"managed","type":"aws_ecr_repository","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ecr:eu-west-1:654654436000:repository/whisper-sagemaker-api","encryption_configuration":[{"encryption_type":"AES256","kms_key":""}],"force_delete":null,"id":"whisper-sagemaker-api","image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"whisper-sagemaker-api","registry_id":"654654436000","repository_url":"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-api","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api","Project":"whisper-sagemaker"},"timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{"encryption_configuration":[{}],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.ecr_frontend.aws_ecr_lifecycle_policy.default[0]","module_address":"module.ecr_frontend","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"id":"whisper-sagemaker-frontend","policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire untagged images older than 7 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":7,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}},{\"action\":{\"type\":\"expire\"},\"description\":\"Keep last 30 images\",\"rulePriority\":2,\"selection\":{\"countNumber\":30,\"countType\":\"imageCountMoreThan\",\"tagStatus\":\"any\"}}]}","registry_id":"654654436000","repository":"whisper-sagemaker-frontend"},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.ecr_frontend.aws_ecr_repository.this","module_address":"module.ecr_frontend","mode":"managed","type":"aws_ecr_repository","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ecr:eu-west-1:654654436000:repository/whisper-sagemaker-frontend","encryption_configuration":[{"encryption_type":"AES256","kms_key":""}],"force_delete":null,"id":"whisper-sagemaker-frontend","image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"whisper-sagemaker-frontend","registry_id":"654654436000","repository_url":"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-frontend","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend","Project":"whisper-sagemaker"},"timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{"encryption_configuration":[{}],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.ecs.aws_appautoscaling_policy.api_cpu[0]","module_address":"module.ecs","mode":"managed","type":"aws_appautoscaling_policy","name":"api_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"alarm_arns":["arn:aws:cloudwatch:eu-west-1:654654436000:alarm:TargetTracking-service/whisper-sagemaker-cluster/whisper-sagemaker-api-service-AlarmHigh-1c1de03a-5599-410a-b36f-4b7596f08575","arn:aws:cloudwatch:eu-west-1:654654436000:alarm:TargetTracking-service/whisper-sagemaker-cluster/whisper-sagemaker-api-service-AlarmLow-84fd6a40-5665-40b0-b0a9-330a4a9de4f7"],"arn":"arn:aws:autoscaling:eu-west-1:654654436000:scalingPolicy:1269e6b2-0523-4368-b5fc-a94212eefdfa:resource/ecs/service/whisper-sagemaker-cluster/whisper-sagemaker-api-service:policyName/whisper-sagemaker-api-cpu-autoscaling","id":"whisper-sagemaker-api-cpu-autoscaling","name":"whisper-sagemaker-api-cpu-autoscaling","policy_type":"TargetTrackingScaling","resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-api-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":""}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":70}]},"after":null,"after_unknown":{},"before_sensitive":{"alarm_arns":[false,false],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"after_sensitive":false}},{"address":"module.ecs.aws_appautoscaling_policy.frontend_cpu[0]","module_address":"module.ecs","mode":"managed","type":"aws_appautoscaling_policy","name":"frontend_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"alarm_arns":["arn:aws:cloudwatch:eu-west-1:654654436000:alarm:TargetTracking-service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service-AlarmHigh-c528a490-27f5-4887-9877-d8dbea394488","arn:aws:cloudwatch:eu-west-1:654654436000:alarm:TargetTracking-service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service-AlarmLow-7cb9aa2e-4b7e-43e5-ba07-22b89878b865"],"arn":"arn:aws:autoscaling:eu-west-1:654654436000:scalingPolicy:cc4b04a3-2f41-4814-84d6-d8fafe4ed9d7:resource/ecs/service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service:policyName/whisper-sagemaker-frontend-cpu-autoscaling","id":"whisper-sagemaker-frontend-cpu-autoscaling","name":"whisper-sagemaker-frontend-cpu-autoscaling","policy_type":"TargetTrackingScaling","resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":""}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":70}]},"after":null,"after_unknown":{},"before_sensitive":{"alarm_arns":[false,false],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"after_sensitive":false}},{"address":"module.ecs.aws_appautoscaling_target.api[0]","module_address":"module.ecs","mode":"managed","type":"aws_appautoscaling_target","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:application-autoscaling:eu-west-1:654654436000:scalable-target/0ec51269e6b205234368b5fca94212eefdfa","id":"service/whisper-sagemaker-cluster/whisper-sagemaker-api-service","max_capacity":10,"min_capacity":1,"resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-api-service","role_arn":"arn:aws:iam::654654436000:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","suspended_state":[{"dynamic_scaling_in_suspended":false,"dynamic_scaling_out_suspended":false,"scheduled_scaling_suspended":false}],"tags":{},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"after":null,"after_unknown":{},"before_sensitive":{"suspended_state":[{}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.ecs.aws_appautoscaling_target.frontend[0]","module_address":"module.ecs","mode":"managed","type":"aws_appautoscaling_target","name":"frontend","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:application-autoscaling:eu-west-1:654654436000:scalable-target/0ec5cc4b04a32f41481484d6d8fafe4ed9d7","id":"service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service","max_capacity":10,"min_capacity":1,"resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service","role_arn":"arn:aws:iam::654654436000:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","suspended_state":[{"dynamic_scaling_in_suspended":false,"dynamic_scaling_out_suspended":false,"scheduled_scaling_suspended":false}],"tags":{},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"after":null,"after_unknown":{},"before_sensitive":{"suspended_state":[{}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.ecs.aws_cloudwatch_log_group.ecs_logs","module_address":"module.ecs","mode":"managed","type":"aws_cloudwatch_log_group","name":"ecs_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:logs:eu-west-1:654654436000:log-group:/ecs/whisper-sagemaker","id":"/ecs/whisper-sagemaker","kms_key_id":"","log_group_class":"STANDARD","name":"/ecs/whisper-sagemaker","name_prefix":"","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-logs","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-logs","Project":"whisper-sagemaker"}},"after":null,"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.ecs.aws_ecs_cluster.main","module_address":"module.ecs","mode":"managed","type":"aws_ecs_cluster","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ecs:eu-west-1:654654436000:cluster/whisper-sagemaker-cluster","configuration":[],"id":"arn:aws:ecs:eu-west-1:654654436000:cluster/whisper-sagemaker-cluster","name":"whisper-sagemaker-cluster","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-cluster","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-cluster","Project":"whisper-sagemaker"}},"after":null,"after_unknown":{},"before_sensitive":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.ecs.aws_ecs_service.api","module_address":"module.ecs","mode":"managed","type":"aws_ecs_service","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"cluster":"arn:aws:ecs:eu-west-1:654654436000:cluster/whisper-sagemaker-cluster","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":2,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-1:654654436000:service/whisper-sagemaker-cluster/whisper-sagemaker-api-service","launch_type":"FARGATE","load_balancer":[{"container_name":"api","container_port":8080,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:targetgroup/whisper-sagemaker-api-tg/d9bf386ccf997e8f"}],"name":"whisper-sagemaker-api-service","network_configuration":[{"assign_public_ip":false,"security_groups":["sg-0f862da7bfb9cc095"],"subnets":["subnet-008cabbcdc25ff9cc","subnet-0dd6f990b701b7dc6"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-service","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-service","Project":"whisper-sagemaker"},"task_definition":"arn:aws:ecs:eu-west-1:654654436000:task-definition/whisper-sagemaker-api:2","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after":null,"after_unknown":{},"before_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]},"after_sensitive":false}},{"address":"module.ecs.aws_ecs_service.frontend","module_address":"module.ecs","mode":"managed","type":"aws_ecs_service","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"cluster":"arn:aws:ecs:eu-west-1:654654436000:cluster/whisper-sagemaker-cluster","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":2,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-west-1:654654436000:service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service","launch_type":"FARGATE","load_balancer":[{"container_name":"frontend","container_port":3000,"elb_name":"","target_group_arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:targetgroup/whisper-sagemaker-frontend-tg/9ee0343d83de7b31"}],"name":"whisper-sagemaker-frontend-service","network_configuration":[{"assign_public_ip":false,"security_groups":["sg-0f862da7bfb9cc095"],"subnets":["subnet-008cabbcdc25ff9cc","subnet-0dd6f990b701b7dc6"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-service","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-service","Project":"whisper-sagemaker"},"task_definition":"arn:aws:ecs:eu-west-1:654654436000:task-definition/whisper-sagemaker-frontend:2","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after":null,"after_unknown":{},"before_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[{}],"deployment_controller":[{}],"load_balancer":[{}],"network_configuration":[{"security_groups":[false],"subnets":[false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]},"after_sensitive":false}},{"address":"module.ecs.aws_ecs_task_definition.api","module_address":"module.ecs","mode":"managed","type":"aws_ecs_task_definition","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ecs:eu-west-1:654654436000:task-definition/whisper-sagemaker-api:2","arn_without_revision":"arn:aws:ecs:eu-west-1:654654436000:task-definition/whisper-sagemaker-api","container_definitions":"[{\"environment\":[{\"name\":\"AWS_REGION\",\"value\":\"eu-west-1\"},{\"name\":\"SAGEMAKER_ENDPOINT_NAME\",\"value\":\"whisper-sagemaker-whisper-endpoint\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost:8080/health || exit 1\"],\"interval\":30,\"retries\":3,\"startPeriod\":60,\"timeout\":5},\"image\":\"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-api:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-stream-prefix\":\"api\",\"awslogs-group\":\"/ecs/whisper-sagemaker\",\"awslogs-region\":\"eu-west-1\"}},\"mountPoints\":[],\"name\":\"api\",\"portMappings\":[{\"containerPort\":8080,\"hostPort\":8080,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"512","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"arn:aws:iam::654654436000:role/whisper-sagemaker-ecs-task-execution-role","family":"whisper-sagemaker-api","id":"whisper-sagemaker-api","inference_accelerator":[],"ipc_mode":"","memory":"1024","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":2,"runtime_platform":[],"skip_destroy":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-task","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-task","Project":"whisper-sagemaker"},"task_role_arn":"arn:aws:iam::654654436000:role/whisper-sagemaker-ecs-task-role","track_latest":false,"volume":[]},"after":null,"after_unknown":{},"before_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]},"after_sensitive":false}},{"address":"module.ecs.aws_ecs_task_definition.frontend","module_address":"module.ecs","mode":"managed","type":"aws_ecs_task_definition","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ecs:eu-west-1:654654436000:task-definition/whisper-sagemaker-frontend:2","arn_without_revision":"arn:aws:ecs:eu-west-1:654654436000:task-definition/whisper-sagemaker-frontend","container_definitions":"[{\"environment\":[{\"name\":\"API_URL\",\"value\":\"http://whisper-sagemaker-alb-299033305.eu-west-1.elb.amazonaws.com\"}],\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost:3000 || exit 1\"],\"interval\":30,\"retries\":3,\"startPeriod\":60,\"timeout\":5},\"image\":\"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-frontend:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/whisper-sagemaker\",\"awslogs-region\":\"eu-west-1\",\"awslogs-stream-prefix\":\"frontend\"}},\"mountPoints\":[],\"name\":\"frontend\",\"portMappings\":[{\"containerPort\":3000,\"hostPort\":3000,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"256","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"arn:aws:iam::654654436000:role/whisper-sagemaker-ecs-task-execution-role","family":"whisper-sagemaker-frontend","id":"whisper-sagemaker-frontend","inference_accelerator":[],"ipc_mode":"","memory":"512","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":2,"runtime_platform":[],"skip_destroy":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-task","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-task","Project":"whisper-sagemaker"},"task_role_arn":"arn:aws:iam::654654436000:role/whisper-sagemaker-ecs-task-role","track_latest":false,"volume":[]},"after":null,"after_unknown":{},"before_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]},"after_sensitive":false}},{"address":"module.ecs.aws_iam_role.task_execution_role","module_address":"module.ecs","mode":"managed","type":"aws_iam_role","name":"task_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:iam::654654436000:role/whisper-sagemaker-ecs-task-execution-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-12-07T19:47:33Z","description":"","force_detach_policies":false,"id":"whisper-sagemaker-ecs-task-execution-role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"],"max_session_duration":3600,"name":"whisper-sagemaker-ecs-task-execution-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-execution-role","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-execution-role","Project":"whisper-sagemaker"},"unique_id":"AROAZQ3DR6KQHNJGXXELL"},"after":null,"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.ecs.aws_iam_role.task_role","module_address":"module.ecs","mode":"managed","type":"aws_iam_role","name":"task_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:iam::654654436000:role/whisper-sagemaker-ecs-task-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-12-07T19:47:33Z","description":"","force_detach_policies":false,"id":"whisper-sagemaker-ecs-task-role","inline_policy":[{"name":"whisper-sagemaker-sagemaker-invoke-policy","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"sagemaker:InvokeEndpoint\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sagemaker:eu-west-1:654654436000:endpoint/whisper-sagemaker-whisper-endpoint\"}]}"}],"managed_policy_arns":[],"max_session_duration":3600,"name":"whisper-sagemaker-ecs-task-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-role","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-role","Project":"whisper-sagemaker"},"unique_id":"AROAZQ3DR6KQNSTBZFX6L"},"after":null,"after_unknown":{},"before_sensitive":{"inline_policy":[{}],"managed_policy_arns":[],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.ecs.aws_iam_role_policy.sagemaker_invoke_policy","module_address":"module.ecs","mode":"managed","type":"aws_iam_role_policy","name":"sagemaker_invoke_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"id":"whisper-sagemaker-ecs-task-role:whisper-sagemaker-sagemaker-invoke-policy","name":"whisper-sagemaker-sagemaker-invoke-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"sagemaker:InvokeEndpoint\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sagemaker:eu-west-1:654654436000:endpoint/whisper-sagemaker-whisper-endpoint\"}]}","role":"whisper-sagemaker-ecs-task-role"},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.ecs.aws_iam_role_policy_attachment.task_execution_role_policy","module_address":"module.ecs","mode":"managed","type":"aws_iam_role_policy_attachment","name":"task_execution_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"id":"whisper-sagemaker-ecs-task-execution-role-20251207194734325600000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"whisper-sagemaker-ecs-task-execution-role"},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.networking.aws_eip.nat[0]","module_address":"module.networking","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"address":null,"allocation_id":"eipalloc-04f0486b703926e21","arn":"arn:aws:ec2:eu-west-1:654654436000:elastic-ip/eipalloc-04f0486b703926e21","associate_with_private_ip":null,"association_id":"eipassoc-0b0fe9046588277b9","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-04f0486b703926e21","instance":"","ipam_pool_id":null,"network_border_group":"eu-west-1","network_interface":"eni-08bda9debc29a79de","private_dns":"ip-10-0-1-194.eu-west-1.compute.internal","private_ip":"10.0.1.194","ptr_record":"","public_dns":"ec2-52-215-228-150.eu-west-1.compute.amazonaws.com","public_ip":"52.215.228.150","public_ipv4_pool":"amazon","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-1","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-1","Project":"whisper-sagemaker"},"timeouts":null,"vpc":true},"after":null,"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_eip.nat[1]","module_address":"module.networking","mode":"managed","type":"aws_eip","name":"nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"address":null,"allocation_id":"eipalloc-005bb216a7e7f25d0","arn":"arn:aws:ec2:eu-west-1:654654436000:elastic-ip/eipalloc-005bb216a7e7f25d0","associate_with_private_ip":null,"association_id":"eipassoc-0297d72cac7d408b2","carrier_ip":"","customer_owned_ip":"","customer_owned_ipv4_pool":"","domain":"vpc","id":"eipalloc-005bb216a7e7f25d0","instance":"","ipam_pool_id":null,"network_border_group":"eu-west-1","network_interface":"eni-037405d71119a4d9f","private_dns":"ip-10-0-2-28.eu-west-1.compute.internal","private_ip":"10.0.2.28","ptr_record":"","public_dns":"ec2-3-248-161-44.eu-west-1.compute.amazonaws.com","public_ip":"3.248.161.44","public_ipv4_pool":"amazon","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-2","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-2","Project":"whisper-sagemaker"},"timeouts":null,"vpc":true},"after":null,"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_internet_gateway.main","module_address":"module.networking","mode":"managed","type":"aws_internet_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:internet-gateway/igw-0222deaef01fb9bff","id":"igw-0222deaef01fb9bff","owner_id":"654654436000","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-igw","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-igw","Project":"whisper-sagemaker"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_lb.main","module_address":"module.networking","mode":"managed","type":"aws_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"access_logs":[{"bucket":"","enabled":false,"prefix":""}],"arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:loadbalancer/app/whisper-sagemaker-alb/bac4e17c5c3a8f62","arn_suffix":"app/whisper-sagemaker-alb/bac4e17c5c3a8f62","client_keep_alive":3600,"connection_logs":[{"bucket":"","enabled":false,"prefix":""}],"customer_owned_ipv4_pool":"","desync_mitigation_mode":"defensive","dns_name":"whisper-sagemaker-alb-299033305.eu-west-1.elb.amazonaws.com","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":true,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"enforce_security_group_inbound_rules_on_private_link_traffic":"","id":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:loadbalancer/app/whisper-sagemaker-alb/bac4e17c5c3a8f62","idle_timeout":60,"internal":false,"ip_address_type":"ipv4","ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"whisper-sagemaker-alb","name_prefix":"","preserve_host_header":false,"security_groups":["sg-0c5631cac26c17916"],"subnet_mapping":[{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0c097bef4e90e5aa4"},{"allocation_id":"","ipv6_address":"","outpost_id":"","private_ipv4_address":"","subnet_id":"subnet-0e2f25dab92624841"}],"subnets":["subnet-0c097bef4e90e5aa4","subnet-0e2f25dab92624841"],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb","Project":"whisper-sagemaker"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5","xff_header_processing_mode":"append","zone_id":"Z32O12XQLNTSW2"},"after":null,"after_unknown":{},"before_sensitive":{"access_logs":[{}],"connection_logs":[{}],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[false],"subnet_mapping":[{},{}],"subnets":[false,false],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_lb_listener.http","module_address":"module.networking","mode":"managed","type":"aws_lb_listener","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"alpn_policy":null,"arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:listener/app/whisper-sagemaker-alb/bac4e17c5c3a8f62/1c60714e3d763149","certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[{"duration":0,"enabled":false}],"target_group":[{"arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:targetgroup/whisper-sagemaker-frontend-tg/9ee0343d83de7b31","weight":1}]}],"order":1,"redirect":[],"target_group_arn":"","type":"forward"}],"id":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:listener/app/whisper-sagemaker-alb/bac4e17c5c3a8f62/1c60714e3d763149","load_balancer_arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:loadbalancer/app/whisper-sagemaker-alb/bac4e17c5c3a8f62","mutual_authentication":[],"port":80,"protocol":"HTTP","routing_http_request_x_amzn_mtls_clientcert_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":null,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":null,"routing_http_request_x_amzn_tls_cipher_suite_header_name":null,"routing_http_request_x_amzn_tls_version_header_name":null,"routing_http_response_access_control_allow_credentials_header_value":"","routing_http_response_access_control_allow_headers_header_value":"","routing_http_response_access_control_allow_methods_header_value":"","routing_http_response_access_control_allow_origin_header_value":"","routing_http_response_access_control_expose_headers_header_value":"","routing_http_response_access_control_max_age_header_value":"","routing_http_response_content_security_policy_header_value":"","routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":"","routing_http_response_x_content_type_options_header_value":"","routing_http_response_x_frame_options_header_value":"","ssl_policy":"","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-http-listener","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-http-listener","Project":"whisper-sagemaker"},"tcp_idle_timeout_seconds":null,"timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[{}],"target_group":[{}]}],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_lb_listener_rule.api_http","module_address":"module.networking","mode":"managed","type":"aws_lb_listener_rule","name":"api_http","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:targetgroup/whisper-sagemaker-api-tg/d9bf386ccf997e8f","type":"forward"}],"arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:listener-rule/app/whisper-sagemaker-alb/bac4e17c5c3a8f62/1c60714e3d763149/8add7c7c4420a926","condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["/api/*","/health","/status/*","/transcribe"]}],"query_string":[],"source_ip":[]}],"id":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:listener-rule/app/whisper-sagemaker-alb/bac4e17c5c3a8f62/1c60714e3d763149/8add7c7c4420a926","listener_arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:listener/app/whisper-sagemaker-alb/bac4e17c5c3a8f62/1c60714e3d763149","priority":100,"tags":{},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"after":null,"after_unknown":{},"before_sensitive":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false,false,false,false]}],"query_string":[],"source_ip":[]}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_lb_target_group.api","module_address":"module.networking","mode":"managed","type":"aws_lb_target_group","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:targetgroup/whisper-sagemaker-api-tg/d9bf386ccf997e8f","arn_suffix":"targetgroup/whisper-sagemaker-api-tg/d9bf386ccf997e8f","connection_termination":null,"deregistration_delay":"30","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:targetgroup/whisper-sagemaker-api-tg/d9bf386ccf997e8f","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-1:654654436000:loadbalancer/app/whisper-sagemaker-alb/bac4e17c5c3a8f62"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"whisper-sagemaker-api-tg","name_prefix":"","port":8080,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-tg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-tg","Project":"whisper-sagemaker"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"after_sensitive":false}},{"address":"module.networking.aws_lb_target_group.frontend","module_address":"module.networking","mode":"managed","type":"aws_lb_target_group","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:targetgroup/whisper-sagemaker-frontend-tg/9ee0343d83de7b31","arn_suffix":"targetgroup/whisper-sagemaker-frontend-tg/9ee0343d83de7b31","connection_termination":null,"deregistration_delay":"30","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"id":"arn:aws:elasticloadbalancing:eu-west-1:654654436000:targetgroup/whisper-sagemaker-frontend-tg/9ee0343d83de7b31","ip_address_type":"ipv4","lambda_multi_value_headers_enabled":false,"load_balancer_arns":["arn:aws:elasticloadbalancing:eu-west-1:654654436000:loadbalancer/app/whisper-sagemaker-alb/bac4e17c5c3a8f62"],"load_balancing_algorithm_type":"round_robin","load_balancing_anomaly_mitigation":"off","load_balancing_cross_zone_enabled":"use_load_balancer_configuration","name":"whisper-sagemaker-frontend-tg","name_prefix":"","port":3000,"preserve_client_ip":null,"protocol":"HTTP","protocol_version":"HTTP1","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":86400,"cookie_name":"","enabled":false,"type":"lb_cookie"}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-tg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-tg","Project":"whisper-sagemaker"},"target_failover":[{"on_deregistration":null,"on_unhealthy":null}],"target_group_health":[{"dns_failover":[{"minimum_healthy_targets_count":"1","minimum_healthy_targets_percentage":"off"}],"unhealthy_state_routing":[{"minimum_healthy_targets_count":1,"minimum_healthy_targets_percentage":"off"}]}],"target_health_state":[{"enable_unhealthy_connection_termination":null,"unhealthy_draining_interval":null}],"target_type":"ip","vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"health_check":[{}],"load_balancer_arns":[false],"stickiness":[{}],"tags":{},"tags_all":{},"target_failover":[{}],"target_group_health":[{"dns_failover":[{}],"unhealthy_state_routing":[{}]}],"target_health_state":[{}]},"after_sensitive":false}},{"address":"module.networking.aws_nat_gateway.main[0]","module_address":"module.networking","mode":"managed","type":"aws_nat_gateway","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"allocation_id":"eipalloc-04f0486b703926e21","association_id":"eipassoc-0b0fe9046588277b9","connectivity_type":"public","id":"nat-0aa91a45b9f7d3c9c","network_interface_id":"eni-08bda9debc29a79de","private_ip":"10.0.1.194","public_ip":"52.215.228.150","secondary_allocation_ids":[],"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-0e2f25dab92624841","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-1","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-1","Project":"whisper-sagemaker"},"timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_nat_gateway.main[1]","module_address":"module.networking","mode":"managed","type":"aws_nat_gateway","name":"main","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"allocation_id":"eipalloc-005bb216a7e7f25d0","association_id":"eipassoc-0297d72cac7d408b2","connectivity_type":"public","id":"nat-0ee0a8771b9674be7","network_interface_id":"eni-037405d71119a4d9f","private_ip":"10.0.2.28","public_ip":"3.248.161.44","secondary_allocation_ids":[],"secondary_private_ip_address_count":0,"secondary_private_ip_addresses":[],"subnet_id":"subnet-0c097bef4e90e5aa4","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-2","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-2","Project":"whisper-sagemaker"},"timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{"secondary_allocation_ids":[],"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_route.private_nat[0]","module_address":"module.networking","mode":"managed","type":"aws_route","name":"private_nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-09a780b550ba0fce41080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0aa91a45b9f7d3c9c","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-09a780b550ba0fce4","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.networking.aws_route.private_nat[1]","module_address":"module.networking","mode":"managed","type":"aws_route","name":"private_nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","id":"r-rtb-017ea51edb168b0911080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"nat-0ee0a8771b9674be7","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-017ea51edb168b091","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.networking.aws_route.public_internet","module_address":"module.networking","mode":"managed","type":"aws_route","name":"public_internet","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"carrier_gateway_id":"","core_network_arn":"","destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0222deaef01fb9bff","id":"r-rtb-0bd0dfcc16bdd90031080289494","instance_id":"","instance_owner_id":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","origin":"CreateRoute","route_table_id":"rtb-0bd0dfcc16bdd9003","state":"active","timeouts":null,"transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.networking.aws_route_table.private[0]","module_address":"module.networking","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:route-table/rtb-09a780b550ba0fce4","id":"rtb-09a780b550ba0fce4","owner_id":"654654436000","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0aa91a45b9f7d3c9c","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-1","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-1","Project":"whisper-sagemaker","Type":"private"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_route_table.private[1]","module_address":"module.networking","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:route-table/rtb-017ea51edb168b091","id":"rtb-017ea51edb168b091","owner_id":"654654436000","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"nat-0ee0a8771b9674be7","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-2","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-2","Project":"whisper-sagemaker","Type":"private"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_route_table.public","module_address":"module.networking","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:route-table/rtb-0bd0dfcc16bdd9003","id":"rtb-0bd0dfcc16bdd9003","owner_id":"654654436000","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0222deaef01fb9bff","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-rt","Project":"whisper-sagemaker","Type":"public"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-rt","Project":"whisper-sagemaker","Type":"public"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_route_table_association.private[0]","module_address":"module.networking","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"gateway_id":"","id":"rtbassoc-0e4229569f110d10b","route_table_id":"rtb-09a780b550ba0fce4","subnet_id":"subnet-0dd6f990b701b7dc6","timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.networking.aws_route_table_association.private[1]","module_address":"module.networking","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"gateway_id":"","id":"rtbassoc-0e55fa0b597ccc308","route_table_id":"rtb-017ea51edb168b091","subnet_id":"subnet-008cabbcdc25ff9cc","timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.networking.aws_route_table_association.public[0]","module_address":"module.networking","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"gateway_id":"","id":"rtbassoc-0103433f3ffef81c1","route_table_id":"rtb-0bd0dfcc16bdd9003","subnet_id":"subnet-0e2f25dab92624841","timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.networking.aws_route_table_association.public[1]","module_address":"module.networking","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"gateway_id":"","id":"rtbassoc-021e42916f59b0b31","route_table_id":"rtb-0bd0dfcc16bdd9003","subnet_id":"subnet-0c097bef4e90e5aa4","timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.networking.aws_security_group.alb","module_address":"module.networking","mode":"managed","type":"aws_security_group","name":"alb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:security-group/sg-0c5631cac26c17916","description":"Security group for Application Load Balancer","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0c5631cac26c17916","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from anywhere","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"HTTPS from anywhere","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"whisper-sagemaker-alb-20251201195121926700000003","name_prefix":"whisper-sagemaker-alb-","owner_id":"654654436000","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb-sg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb-sg","Project":"whisper-sagemaker"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_security_group.ecs","module_address":"module.networking","mode":"managed","type":"aws_security_group","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:security-group/sg-0f862da7bfb9cc095","description":"Security group for ECS tasks","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0f862da7bfb9cc095","ingress":[{"cidr_blocks":[],"description":"Allow traffic from ALB","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0c5631cac26c17916"],"self":false,"to_port":65535}],"name":"whisper-sagemaker-ecs-20251201195124287400000005","name_prefix":"whisper-sagemaker-ecs-","owner_id":"654654436000","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-sg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-sg","Project":"whisper-sagemaker"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_security_group.sagemaker","module_address":"module.networking","mode":"managed","type":"aws_security_group","name":"sagemaker","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:security-group/sg-0db7683d20fe5e228","description":"Security group for SageMaker endpoints","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0db7683d20fe5e228","ingress":[{"cidr_blocks":[],"description":"Allow traffic from ECS tasks","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0f862da7bfb9cc095"],"self":false,"to_port":443}],"name":"whisper-sagemaker-sagemaker-20251201195126184700000006","name_prefix":"whisper-sagemaker-sagemaker-","owner_id":"654654436000","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-sg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-sg","Project":"whisper-sagemaker"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[false]}],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_subnet.private[0]","module_address":"module.networking","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:subnet/subnet-0dd6f990b701b7dc6","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1a","availability_zone_id":"euw1-az3","cidr_block":"10.0.11.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0dd6f990b701b7dc6","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"654654436000","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-1","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-1","Project":"whisper-sagemaker","Type":"private"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_subnet.private[1]","module_address":"module.networking","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:subnet/subnet-008cabbcdc25ff9cc","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1b","availability_zone_id":"euw1-az1","cidr_block":"10.0.12.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-008cabbcdc25ff9cc","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"654654436000","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-2","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-2","Project":"whisper-sagemaker","Type":"private"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_subnet.public[0]","module_address":"module.networking","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:subnet/subnet-0e2f25dab92624841","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1a","availability_zone_id":"euw1-az3","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e2f25dab92624841","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"654654436000","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-1","Project":"whisper-sagemaker","Type":"public"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-1","Project":"whisper-sagemaker","Type":"public"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_subnet.public[1]","module_address":"module.networking","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:subnet/subnet-0c097bef4e90e5aa4","assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1b","availability_zone_id":"euw1-az1","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0c097bef4e90e5aa4","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"654654436000","private_dns_hostname_type_on_launch":"ip-name","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-2","Project":"whisper-sagemaker","Type":"public"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-2","Project":"whisper-sagemaker","Type":"public"},"timeouts":null,"vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_vpc.main","module_address":"module.networking","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:vpc/vpc-0b6914935cae3a5c5","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-092e403ac28eaaa3b","default_route_table_id":"rtb-0cf22d332dfed75b3","default_security_group_id":"sg-0efc89ddb22600c14","dhcp_options_id":"dopt-0d577799dba56e441","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-0b6914935cae3a5c5","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-0cf22d332dfed75b3","owner_id":"654654436000","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-vpc","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-vpc","Project":"whisper-sagemaker"}},"after":null,"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.networking.aws_vpc_endpoint.s3","module_address":"module.networking","mode":"managed","type":"aws_vpc_endpoint","name":"s3","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:ec2:eu-west-1:654654436000:vpc-endpoint/vpce-0f2967159001c26c6","auto_accept":null,"cidr_blocks":["3.5.64.0/21","3.5.72.0/23","52.92.0.0/17","52.218.0.0/17"],"dns_entry":[],"dns_options":[{"dns_record_ip_type":"service-defined","private_dns_only_for_inbound_resolver_endpoint":false}],"id":"vpce-0f2967159001c26c6","ip_address_type":"ipv4","network_interface_ids":[],"owner_id":"654654436000","policy":"{\"Statement\":[{\"Action\":\"*\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2008-10-17\"}","prefix_list_id":"pl-6da54004","private_dns_enabled":false,"requester_managed":false,"resource_configuration_arn":"","route_table_ids":["rtb-017ea51edb168b091","rtb-09a780b550ba0fce4","rtb-0bd0dfcc16bdd9003"],"security_group_ids":[],"service_name":"com.amazonaws.eu-west-1.s3","service_network_arn":"","service_region":"eu-west-1","state":"available","subnet_configuration":[],"subnet_ids":[],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-s3-endpoint","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-s3-endpoint","Project":"whisper-sagemaker"},"timeouts":null,"vpc_endpoint_type":"Gateway","vpc_id":"vpc-0b6914935cae3a5c5"},"after":null,"after_unknown":{},"before_sensitive":{"cidr_blocks":[false,false,false,false],"dns_entry":[],"dns_options":[{}],"network_interface_ids":[],"route_table_ids":[false,false,false],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.sagemaker.aws_appautoscaling_policy.sagemaker_policy[0]","module_address":"module.sagemaker","mode":"managed","type":"aws_appautoscaling_policy","name":"sagemaker_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"alarm_arns":["arn:aws:cloudwatch:eu-west-1:654654436000:alarm:TargetTracking-endpoint/whisper-sagemaker-whisper-endpoint/variant/AllTraffic-AlarmHigh-9cce0bfd-39a0-4920-88cf-b450b42e92f4","arn:aws:cloudwatch:eu-west-1:654654436000:alarm:TargetTracking-endpoint/whisper-sagemaker-whisper-endpoint/variant/AllTraffic-AlarmLow-415512f3-7599-42df-89cc-0418160d1876"],"arn":"arn:aws:autoscaling:eu-west-1:654654436000:scalingPolicy:fafda8f6-ae87-4f6d-bad6-e89f8834676d:resource/sagemaker/endpoint/whisper-sagemaker-whisper-endpoint/variant/AllTraffic:policyName/whisper-sagemaker-sagemaker-autoscaling-policy","id":"whisper-sagemaker-sagemaker-autoscaling-policy","name":"whisper-sagemaker-sagemaker-autoscaling-policy","policy_type":"TargetTrackingScaling","resource_id":"endpoint/whisper-sagemaker-whisper-endpoint/variant/AllTraffic","scalable_dimension":"sagemaker:variant:DesiredInstanceCount","service_namespace":"sagemaker","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"SageMakerVariantInvocationsPerInstance","resource_label":""}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":1000}]},"after":null,"after_unknown":{},"before_sensitive":{"alarm_arns":[false,false],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"after_sensitive":false}},{"address":"module.sagemaker.aws_appautoscaling_target.sagemaker_target[0]","module_address":"module.sagemaker","mode":"managed","type":"aws_appautoscaling_target","name":"sagemaker_target","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:application-autoscaling:eu-west-1:654654436000:scalable-target/056mfafda8f6ae874f6dbad6e89f8834676d","id":"endpoint/whisper-sagemaker-whisper-endpoint/variant/AllTraffic","max_capacity":3,"min_capacity":1,"resource_id":"endpoint/whisper-sagemaker-whisper-endpoint/variant/AllTraffic","role_arn":"arn:aws:iam::654654436000:role/aws-service-role/sagemaker.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_SageMakerEndpoint","scalable_dimension":"sagemaker:variant:DesiredInstanceCount","service_namespace":"sagemaker","suspended_state":[{"dynamic_scaling_in_suspended":false,"dynamic_scaling_out_suspended":false,"scheduled_scaling_suspended":false}],"tags":null,"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"after":null,"after_unknown":{},"before_sensitive":{"suspended_state":[{}],"tags_all":{}},"after_sensitive":false}},{"address":"module.sagemaker.aws_cloudwatch_metric_alarm.model_invocation_errors","module_address":"module.sagemaker","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"model_invocation_errors","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"actions_enabled":true,"alarm_actions":[],"alarm_description":"This metric monitors SageMaker model invocation errors","alarm_name":"whisper-sagemaker-sagemaker-invocation-errors","arn":"arn:aws:cloudwatch:eu-west-1:654654436000:alarm:whisper-sagemaker-sagemaker-invocation-errors","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"EndpointName":"whisper-sagemaker-whisper-endpoint","VariantName":"AllTraffic"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"whisper-sagemaker-sagemaker-invocation-errors","insufficient_data_actions":[],"metric_name":"ModelInvocationErrors","metric_query":[],"namespace":"AWS/SageMaker","ok_actions":[],"period":60,"statistic":"Sum","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-invocation-errors","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-invocation-errors","Project":"whisper-sagemaker"},"threshold":5,"threshold_metric_id":"","treat_missing_data":"notBreaching","unit":""},"after":null,"after_unknown":{},"before_sensitive":{"alarm_actions":[],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.sagemaker.aws_cloudwatch_metric_alarm.model_latency","module_address":"module.sagemaker","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"model_latency","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"actions_enabled":true,"alarm_actions":[],"alarm_description":"This metric monitors SageMaker model latency","alarm_name":"whisper-sagemaker-sagemaker-high-latency","arn":"arn:aws:cloudwatch:eu-west-1:654654436000:alarm:whisper-sagemaker-sagemaker-high-latency","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{"EndpointName":"whisper-sagemaker-whisper-endpoint","VariantName":"AllTraffic"},"evaluate_low_sample_count_percentiles":"","evaluation_periods":2,"extended_statistic":"","id":"whisper-sagemaker-sagemaker-high-latency","insufficient_data_actions":[],"metric_name":"ModelLatency","metric_query":[],"namespace":"AWS/SageMaker","ok_actions":[],"period":60,"statistic":"Average","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-high-latency","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-high-latency","Project":"whisper-sagemaker"},"threshold":30000,"threshold_metric_id":"","treat_missing_data":"notBreaching","unit":""},"after":null,"after_unknown":{},"before_sensitive":{"alarm_actions":[],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.sagemaker.aws_iam_role.sagemaker_execution","module_address":"module.sagemaker","mode":"managed","type":"aws_iam_role","name":"sagemaker_execution","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:iam::654654436000:role/whisper-sagemaker-sagemaker-execution-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"sagemaker.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-12-01T19:54:30Z","description":"","force_detach_policies":false,"id":"whisper-sagemaker-sagemaker-execution-role","inline_policy":[{"name":"whisper-sagemaker-sagemaker-s3-policy","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::sagemaker-whisper-models-654654436000-eu-west-1\",\"arn:aws:s3:::sagemaker-whisper-models-654654436000-eu-west-1/*\"]},{\"Action\":[\"ecr:GetAuthorizationToken\",\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}"}],"managed_policy_arns":["arn:aws:iam::aws:policy/AmazonSageMakerFullAccess"],"max_session_duration":3600,"name":"whisper-sagemaker-sagemaker-execution-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-execution-role","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-execution-role","Project":"whisper-sagemaker"},"unique_id":"AROAZQ3DR6KQCX5B2QONQ"},"after":null,"after_unknown":{},"before_sensitive":{"inline_policy":[{}],"managed_policy_arns":[false],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.sagemaker.aws_iam_role_policy.sagemaker_s3_access","module_address":"module.sagemaker","mode":"managed","type":"aws_iam_role_policy","name":"sagemaker_s3_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"id":"whisper-sagemaker-sagemaker-execution-role:whisper-sagemaker-sagemaker-s3-policy","name":"whisper-sagemaker-sagemaker-s3-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::sagemaker-whisper-models-654654436000-eu-west-1\",\"arn:aws:s3:::sagemaker-whisper-models-654654436000-eu-west-1/*\"]},{\"Action\":[\"ecr:GetAuthorizationToken\",\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}","role":"whisper-sagemaker-sagemaker-execution-role"},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.sagemaker.aws_iam_role_policy_attachment.sagemaker_full_access","module_address":"module.sagemaker","mode":"managed","type":"aws_iam_role_policy_attachment","name":"sagemaker_full_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"id":"whisper-sagemaker-sagemaker-execution-role-20251201195431114900000009","policy_arn":"arn:aws:iam::aws:policy/AmazonSageMakerFullAccess","role":"whisper-sagemaker-sagemaker-execution-role"},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false}},{"address":"module.sagemaker.aws_sagemaker_endpoint.whisper","module_address":"module.sagemaker","mode":"managed","type":"aws_sagemaker_endpoint","name":"whisper","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:sagemaker:eu-west-1:654654436000:endpoint/whisper-sagemaker-whisper-endpoint","deployment_config":[],"endpoint_config_name":"whisper-sagemaker-whisper-endpoint-config","id":"whisper-sagemaker-whisper-endpoint","name":"whisper-sagemaker-whisper-endpoint","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint","Project":"whisper-sagemaker"}},"after":null,"after_unknown":{},"before_sensitive":{"deployment_config":[],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.sagemaker.aws_sagemaker_endpoint_configuration.whisper","module_address":"module.sagemaker","mode":"managed","type":"aws_sagemaker_endpoint_configuration","name":"whisper","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:sagemaker:eu-west-1:654654436000:endpoint-config/whisper-sagemaker-whisper-endpoint-config","async_inference_config":[],"data_capture_config":[],"id":"whisper-sagemaker-whisper-endpoint-config","kms_key_arn":"","name":"whisper-sagemaker-whisper-endpoint-config","name_prefix":"","production_variants":[{"accelerator_type":"","container_startup_health_check_timeout_in_seconds":0,"core_dump_config":[],"enable_ssm_access":false,"inference_ami_version":"","initial_instance_count":1,"initial_variant_weight":1,"instance_type":"ml.g4dn.xlarge","managed_instance_scaling":[],"model_data_download_timeout_in_seconds":0,"model_name":"whisper-sagemaker-whisper-model","routing_config":[],"serverless_config":[],"variant_name":"AllTraffic","volume_size_in_gb":0}],"shadow_production_variants":[],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint-config","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint-config","Project":"whisper-sagemaker"}},"after":null,"after_unknown":{},"before_sensitive":{"async_inference_config":[],"data_capture_config":[],"production_variants":[{"core_dump_config":[],"managed_instance_scaling":[],"routing_config":[],"serverless_config":[]}],"shadow_production_variants":[],"tags":{},"tags_all":{}},"after_sensitive":false}},{"address":"module.sagemaker.aws_sagemaker_model.whisper","module_address":"module.sagemaker","mode":"managed","type":"aws_sagemaker_model","name":"whisper","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["delete"],"before":{"arn":"arn:aws:sagemaker:eu-west-1:654654436000:model/whisper-sagemaker-whisper-model","container":[],"enable_network_isolation":false,"execution_role_arn":"arn:aws:iam::654654436000:role/whisper-sagemaker-sagemaker-execution-role","id":"whisper-sagemaker-whisper-model","inference_execution_config":[],"name":"whisper-sagemaker-whisper-model","primary_container":[{"container_hostname":"","environment":{},"image":"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-inference:latest","image_config":[],"inference_specification_name":"","mode":"SingleModel","model_data_source":[{"s3_data_source":[{"compression_type":"Gzip","model_access_config":[],"s3_data_type":"S3Object","s3_uri":"s3://sagemaker-whisper-models-654654436000-eu-west-1/whisper-large-v3-turbo/model.tar.gz"}]}],"model_data_url":"s3://sagemaker-whisper-models-654654436000-eu-west-1/whisper-large-v3-turbo/model.tar.gz","model_package_name":"","multi_model_config":[]}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-model","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-model","Project":"whisper-sagemaker"},"vpc_config":[{"security_group_ids":["sg-0db7683d20fe5e228"],"subnets":["subnet-008cabbcdc25ff9cc","subnet-0dd6f990b701b7dc6"]}]},"after":null,"after_unknown":{},"before_sensitive":{"container":[],"inference_execution_config":[],"primary_container":[{"environment":{},"image_config":[],"model_data_source":[{"s3_data_source":[{"model_access_config":[]}]}],"multi_model_config":[]}],"tags":{},"tags_all":{},"vpc_config":[{"security_group_ids":[false],"subnets":[false,false]}]},"after_sensitive":false}}],"resource_changes":[{"address":"aws_cloudwatch_dashboard.main","mode":"managed","type":"aws_cloudwatch_dashboard","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"dashboard_name":"whisper-sagemaker-dashboard"},"after_unknown":{"dashboard_arn":true,"dashboard_body":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.ecr_api.aws_ecr_lifecycle_policy.default[0]","module_address":"module.ecr_api","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire untagged images older than 7 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":7,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}},{\"action\":{\"type\":\"expire\"},\"description\":\"Keep last 30 images\",\"rulePriority\":2,\"selection\":{\"countNumber\":30,\"countType\":\"imageCountMoreThan\",\"tagStatus\":\"any\"}}]}","repository":"whisper-sagemaker-api"},"after_unknown":{"id":true,"registry_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.ecr_api.aws_ecr_repository.this","module_address":"module.ecr_api","mode":"managed","type":"aws_ecr_repository","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[{"encryption_type":"AES256"}],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"whisper-sagemaker-api","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[{"kms_key":true}],"id":true,"image_scanning_configuration":[{}],"registry_id":true,"repository_url":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[{}],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}}},{"address":"module.ecr_frontend.aws_ecr_lifecycle_policy.default[0]","module_address":"module.ecr_frontend","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"default","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire untagged images older than 7 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":7,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}},{\"action\":{\"type\":\"expire\"},\"description\":\"Keep last 30 images\",\"rulePriority\":2,\"selection\":{\"countNumber\":30,\"countType\":\"imageCountMoreThan\",\"tagStatus\":\"any\"}}]}","repository":"whisper-sagemaker-frontend"},"after_unknown":{"id":true,"registry_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.ecr_frontend.aws_ecr_repository.this","module_address":"module.ecr_frontend","mode":"managed","type":"aws_ecr_repository","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[{"encryption_type":"AES256"}],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"whisper-sagemaker-frontend","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[{"kms_key":true}],"id":true,"image_scanning_configuration":[{}],"registry_id":true,"repository_url":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[{}],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}}},{"address":"module.ecs.aws_appautoscaling_policy.api_cpu[0]","module_address":"module.ecs","mode":"managed","type":"aws_appautoscaling_policy","name":"api_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"whisper-sagemaker-api-cpu-autoscaling","policy_type":"TargetTrackingScaling","resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-api-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":null}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":70}]},"after_unknown":{"alarm_arns":true,"arn":true,"id":true,"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"before_sensitive":false,"after_sensitive":{"alarm_arns":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}}},{"address":"module.ecs.aws_appautoscaling_policy.frontend_cpu[0]","module_address":"module.ecs","mode":"managed","type":"aws_appautoscaling_policy","name":"frontend_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"whisper-sagemaker-frontend-cpu-autoscaling","policy_type":"TargetTrackingScaling","resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":null}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":70}]},"after_unknown":{"alarm_arns":true,"arn":true,"id":true,"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"before_sensitive":false,"after_sensitive":{"alarm_arns":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}}},{"address":"module.ecs.aws_appautoscaling_target.api[0]","module_address":"module.ecs","mode":"managed","type":"aws_appautoscaling_target","name":"api","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"max_capacity":10,"min_capacity":1,"resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-api-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","tags":null,"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"id":true,"role_arn":true,"suspended_state":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"suspended_state":[],"tags_all":{}}}},{"address":"module.ecs.aws_appautoscaling_target.frontend[0]","module_address":"module.ecs","mode":"managed","type":"aws_appautoscaling_target","name":"frontend","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"max_capacity":10,"min_capacity":1,"resource_id":"service/whisper-sagemaker-cluster/whisper-sagemaker-frontend-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","tags":null,"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"id":true,"role_arn":true,"suspended_state":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"suspended_state":[],"tags_all":{}}}},{"address":"module.ecs.aws_cloudwatch_log_group.ecs_logs","module_address":"module.ecs","mode":"managed","type":"aws_cloudwatch_log_group","name":"ecs_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"/ecs/whisper-sagemaker","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-logs","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-logs","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"id":true,"log_group_class":true,"name_prefix":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.ecs.aws_ecs_cluster.main","module_address":"module.ecs","mode":"managed","type":"aws_ecs_cluster","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"configuration":[],"name":"whisper-sagemaker-cluster","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-cluster","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-cluster","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"configuration":[],"id":true,"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}}}},{"address":"module.ecs.aws_ecs_service.api","module_address":"module.ecs","mode":"managed","type":"aws_ecs_service","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":2,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[{"container_name":"api","container_port":8080,"elb_name":""}],"name":"whisper-sagemaker-api-service","network_configuration":[{"assign_public_ip":false}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-service","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-service","Project":"whisper-sagemaker"},"timeouts":null,"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after_unknown":{"alarms":[],"capacity_provider_strategy":[],"cluster":true,"deployment_circuit_breaker":[],"deployment_controller":[],"iam_role":true,"id":true,"load_balancer":[{"target_group_arn":true}],"network_configuration":[{"security_groups":true,"subnets":true}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":true,"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":true,"triggers":true,"volume_configuration":[],"vpc_lattice_configurations":[]},"before_sensitive":false,"after_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"load_balancer":[{}],"network_configuration":[{"security_groups":[],"subnets":[]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}}},{"address":"module.ecs.aws_ecs_service.frontend","module_address":"module.ecs","mode":"managed","type":"aws_ecs_service","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":2,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[{"container_name":"frontend","container_port":3000,"elb_name":""}],"name":"whisper-sagemaker-frontend-service","network_configuration":[{"assign_public_ip":false}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-service","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-service","Project":"whisper-sagemaker"},"timeouts":null,"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after_unknown":{"alarms":[],"capacity_provider_strategy":[],"cluster":true,"deployment_circuit_breaker":[],"deployment_controller":[],"iam_role":true,"id":true,"load_balancer":[{"target_group_arn":true}],"network_configuration":[{"security_groups":true,"subnets":true}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":true,"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":true,"triggers":true,"volume_configuration":[],"vpc_lattice_configurations":[]},"before_sensitive":false,"after_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"load_balancer":[{}],"network_configuration":[{"security_groups":[],"subnets":[]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}}},{"address":"module.ecs.aws_ecs_task_definition.api","module_address":"module.ecs","mode":"managed","type":"aws_ecs_task_definition","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cpu":"512","ephemeral_storage":[],"family":"whisper-sagemaker-api","inference_accelerator":[],"ipc_mode":null,"memory":"1024","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"runtime_platform":[],"skip_destroy":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-task","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-task","Project":"whisper-sagemaker"},"track_latest":false,"volume":[]},"after_unknown":{"arn":true,"arn_without_revision":true,"container_definitions":true,"enable_fault_injection":true,"ephemeral_storage":[],"execution_role_arn":true,"id":true,"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"revision":true,"runtime_platform":[],"tags":{},"tags_all":{},"task_role_arn":true,"volume":[]},"before_sensitive":false,"after_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}}},{"address":"module.ecs.aws_ecs_task_definition.frontend","module_address":"module.ecs","mode":"managed","type":"aws_ecs_task_definition","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cpu":"256","ephemeral_storage":[],"family":"whisper-sagemaker-frontend","inference_accelerator":[],"ipc_mode":null,"memory":"512","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"runtime_platform":[],"skip_destroy":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-task","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-task","Project":"whisper-sagemaker"},"track_latest":false,"volume":[]},"after_unknown":{"arn":true,"arn_without_revision":true,"container_definitions":true,"enable_fault_injection":true,"ephemeral_storage":[],"execution_role_arn":true,"id":true,"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"revision":true,"runtime_platform":[],"tags":{},"tags_all":{},"task_role_arn":true,"volume":[]},"before_sensitive":false,"after_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}}},{"address":"module.ecs.aws_iam_role.task_execution_role","module_address":"module.ecs","mode":"managed","type":"aws_iam_role","name":"task_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"whisper-sagemaker-ecs-task-execution-role","path":"/","permissions_boundary":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-execution-role","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-execution-role","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.ecs.aws_iam_role.task_role","module_address":"module.ecs","mode":"managed","type":"aws_iam_role","name":"task_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"whisper-sagemaker-ecs-task-role","path":"/","permissions_boundary":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-role","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-task-role","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.ecs.aws_iam_role_policy.sagemaker_invoke_policy","module_address":"module.ecs","mode":"managed","type":"aws_iam_role_policy","name":"sagemaker_invoke_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"whisper-sagemaker-sagemaker-invoke-policy"},"after_unknown":{"id":true,"name_prefix":true,"policy":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.ecs.aws_iam_role_policy_attachment.task_execution_role_policy","module_address":"module.ecs","mode":"managed","type":"aws_iam_role_policy_attachment","name":"task_execution_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"whisper-sagemaker-ecs-task-execution-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_eip.nat[0]","module_address":"module.networking","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-1","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-1","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"ipam_pool_id":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{},"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_eip.nat[1]","module_address":"module.networking","mode":"managed","type":"aws_eip","name":"nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-2","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-eip-2","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"ipam_pool_id":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{},"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_internet_gateway.main","module_address":"module.networking","mode":"managed","type":"aws_internet_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-igw","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-igw","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_lb.main","module_address":"module.networking","mode":"managed","type":"aws_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"whisper-sagemaker-alb","preserve_host_header":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb","Project":"whisper-sagemaker"},"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"connection_logs":[],"dns_name":true,"enforce_security_group_inbound_rules_on_private_link_traffic":true,"id":true,"ip_address_type":true,"ipam_pools":[],"minimum_load_balancer_capacity":[],"name_prefix":true,"security_groups":true,"subnet_mapping":true,"subnets":true,"tags":{},"tags_all":{},"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"connection_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_lb_listener.http","module_address":"module.networking","mode":"managed","type":"aws_lb_listener","name":"http","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[],"target_group":[{"weight":1}]}],"redirect":[],"target_group_arn":null,"type":"forward"}],"port":80,"protocol":"HTTP","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-http-listener","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-http-listener","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[],"target_group":[{"arn":true}]}],"order":true,"redirect":[]}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"routing_http_request_x_amzn_mtls_clientcert_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":true,"routing_http_request_x_amzn_tls_cipher_suite_header_name":true,"routing_http_request_x_amzn_tls_version_header_name":true,"routing_http_response_access_control_allow_credentials_header_value":true,"routing_http_response_access_control_allow_headers_header_value":true,"routing_http_response_access_control_allow_methods_header_value":true,"routing_http_response_access_control_allow_origin_header_value":true,"routing_http_response_access_control_expose_headers_header_value":true,"routing_http_response_access_control_max_age_header_value":true,"routing_http_response_content_security_policy_header_value":true,"routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":true,"routing_http_response_x_content_type_options_header_value":true,"routing_http_response_x_frame_options_header_value":true,"ssl_policy":true,"tags":{},"tags_all":{},"tcp_idle_timeout_seconds":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[{"stickiness":[],"target_group":[{}]}],"redirect":[]}],"mutual_authentication":[],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_lb_listener_rule.api_http","module_address":"module.networking","mode":"managed","type":"aws_lb_listener_rule","name":"api_http","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":["/api/*","/health","/status/*","/transcribe"]}],"query_string":[],"source_ip":[]}],"priority":100,"tags":null,"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"after_unknown":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"arn":true,"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false,false,false,false]}],"query_string":[],"source_ip":[]}],"id":true,"listener_arn":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"condition":[{"host_header":[],"http_header":[],"http_request_method":[],"path_pattern":[{"values":[false,false,false,false]}],"query_string":[],"source_ip":[]}],"tags_all":{}}}},{"address":"module.networking.aws_lb_target_group.api","module_address":"module.networking","mode":"managed","type":"aws_lb_target_group","name":"api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"30","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"lambda_multi_value_headers_enabled":false,"name":"whisper-sagemaker-api-tg","port":8080,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-tg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-api-tg","Project":"whisper-sagemaker"},"target_type":"ip"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags":{},"tags_all":{},"target_failover":true,"target_group_health":true,"target_health_state":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}}},{"address":"module.networking.aws_lb_target_group.frontend","module_address":"module.networking","mode":"managed","type":"aws_lb_target_group","name":"frontend","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"30","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":3}],"lambda_multi_value_headers_enabled":false,"name":"whisper-sagemaker-frontend-tg","port":3000,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-tg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-frontend-tg","Project":"whisper-sagemaker"},"target_type":"ip"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags":{},"tags_all":{},"target_failover":true,"target_group_health":true,"target_health_state":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}}},{"address":"module.networking.aws_nat_gateway.main[0]","module_address":"module.networking","mode":"managed","type":"aws_nat_gateway","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-1","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-1","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_nat_gateway.main[1]","module_address":"module.networking","mode":"managed","type":"aws_nat_gateway","name":"main","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-2","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-nat-2","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_route.private_nat[0]","module_address":"module.networking","mode":"managed","type":"aws_route","name":"private_nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_route.private_nat[1]","module_address":"module.networking","mode":"managed","type":"aws_route","name":"private_nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_route.public_internet","module_address":"module.networking","mode":"managed","type":"aws_route","name":"public_internet","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"gateway_id":true,"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_route_table.private[0]","module_address":"module.networking","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-1","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-1","Project":"whisper-sagemaker","Type":"private"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_route_table.private[1]","module_address":"module.networking","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-2","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-rt-2","Project":"whisper-sagemaker","Type":"private"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_route_table.public","module_address":"module.networking","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-rt","Project":"whisper-sagemaker","Type":"public"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-rt","Project":"whisper-sagemaker","Type":"public"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_route_table_association.private[0]","module_address":"module.networking","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_route_table_association.private[1]","module_address":"module.networking","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_route_table_association.public[0]","module_address":"module.networking","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_route_table_association.public[1]","module_address":"module.networking","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_security_group.alb","module_address":"module.networking","mode":"managed","type":"aws_security_group","name":"alb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for Application Load Balancer","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from anywhere","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"HTTPS from anywhere","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name_prefix":"whisper-sagemaker-alb-","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb-sg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-alb-sg","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_security_group.ecs","module_address":"module.networking","mode":"managed","type":"aws_security_group","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for ECS tasks","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow traffic from ALB","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":65535}],"name_prefix":"whisper-sagemaker-ecs-","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-sg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-ecs-sg","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_security_group.sagemaker","module_address":"module.networking","mode":"managed","type":"aws_security_group","name":"sagemaker","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for SageMaker endpoints","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow traffic from ECS tasks","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":443}],"name_prefix":"whisper-sagemaker-sagemaker-","revoke_rules_on_delete":false,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-sg","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-sg","Project":"whisper-sagemaker"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_subnet.private[0]","module_address":"module.networking","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1a","cidr_block":"10.0.11.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-1","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-1","Project":"whisper-sagemaker","Type":"private"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_subnet.private[1]","module_address":"module.networking","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1b","cidr_block":"10.0.12.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-2","Project":"whisper-sagemaker","Type":"private"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-private-subnet-2","Project":"whisper-sagemaker","Type":"private"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_subnet.public[0]","module_address":"module.networking","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1a","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-1","Project":"whisper-sagemaker","Type":"public"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-1","Project":"whisper-sagemaker","Type":"public"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_subnet.public[1]","module_address":"module.networking","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-1b","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-2","Project":"whisper-sagemaker","Type":"public"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-public-subnet-2","Project":"whisper-sagemaker","Type":"public"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_vpc.main","module_address":"module.networking","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-vpc","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-vpc","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_vpc_endpoint.s3","module_address":"module.networking","mode":"managed","type":"aws_vpc_endpoint","name":"s3","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-west-1.s3","service_network_arn":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-s3-endpoint","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-s3-endpoint","Project":"whisper-sagemaker"},"timeouts":null,"vpc_endpoint_type":"Gateway"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"private_dns_enabled":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"module.sagemaker.aws_appautoscaling_policy.sagemaker_policy[0]","module_address":"module.sagemaker","mode":"managed","type":"aws_appautoscaling_policy","name":"sagemaker_policy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"whisper-sagemaker-sagemaker-autoscaling-policy","policy_type":"TargetTrackingScaling","resource_id":"endpoint/whisper-sagemaker-whisper-endpoint/variant/AllTraffic","scalable_dimension":"sagemaker:variant:DesiredInstanceCount","service_namespace":"sagemaker","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"SageMakerVariantInvocationsPerInstance","resource_label":null}],"scale_in_cooldown":300,"scale_out_cooldown":60,"target_value":1000}]},"after_unknown":{"alarm_arns":true,"arn":true,"id":true,"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"before_sensitive":false,"after_sensitive":{"alarm_arns":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}}},{"address":"module.sagemaker.aws_appautoscaling_target.sagemaker_target[0]","module_address":"module.sagemaker","mode":"managed","type":"aws_appautoscaling_target","name":"sagemaker_target","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"max_capacity":3,"min_capacity":1,"resource_id":"endpoint/whisper-sagemaker-whisper-endpoint/variant/AllTraffic","scalable_dimension":"sagemaker:variant:DesiredInstanceCount","service_namespace":"sagemaker","tags":null,"tags_all":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"id":true,"role_arn":true,"suspended_state":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"suspended_state":[],"tags_all":{}}}},{"address":"module.sagemaker.aws_cloudwatch_metric_alarm.model_invocation_errors","module_address":"module.sagemaker","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"model_invocation_errors","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"This metric monitors SageMaker model invocation errors","alarm_name":"whisper-sagemaker-sagemaker-invocation-errors","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"dimensions":{"EndpointName":"whisper-sagemaker-whisper-endpoint","VariantName":"AllTraffic"},"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"ModelInvocationErrors","metric_query":[],"namespace":"AWS/SageMaker","ok_actions":null,"period":60,"statistic":"Sum","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-invocation-errors","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-invocation-errors","Project":"whisper-sagemaker"},"threshold":5,"threshold_metric_id":null,"treat_missing_data":"notBreaching","unit":null},"after_unknown":{"arn":true,"dimensions":{},"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"dimensions":{},"metric_query":[],"tags":{},"tags_all":{}}}},{"address":"module.sagemaker.aws_cloudwatch_metric_alarm.model_latency","module_address":"module.sagemaker","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"model_latency","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"This metric monitors SageMaker model latency","alarm_name":"whisper-sagemaker-sagemaker-high-latency","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"dimensions":{"EndpointName":"whisper-sagemaker-whisper-endpoint","VariantName":"AllTraffic"},"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"ModelLatency","metric_query":[],"namespace":"AWS/SageMaker","ok_actions":null,"period":60,"statistic":"Average","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-high-latency","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-high-latency","Project":"whisper-sagemaker"},"threshold":30000,"threshold_metric_id":null,"treat_missing_data":"notBreaching","unit":null},"after_unknown":{"arn":true,"dimensions":{},"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"dimensions":{},"metric_query":[],"tags":{},"tags_all":{}}}},{"address":"module.sagemaker.aws_iam_role.sagemaker_execution","module_address":"module.sagemaker","mode":"managed","type":"aws_iam_role","name":"sagemaker_execution","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"sagemaker.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"whisper-sagemaker-sagemaker-execution-role","path":"/","permissions_boundary":null,"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-execution-role","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-sagemaker-execution-role","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.sagemaker.aws_iam_role_policy.sagemaker_s3_access","module_address":"module.sagemaker","mode":"managed","type":"aws_iam_role_policy","name":"sagemaker_s3_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"whisper-sagemaker-sagemaker-s3-policy","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::sagemaker-whisper-models-654654436000-eu-west-1\",\"arn:aws:s3:::sagemaker-whisper-models-654654436000-eu-west-1/*\"]},{\"Action\":[\"ecr:GetAuthorizationToken\",\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}"},"after_unknown":{"id":true,"name_prefix":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.sagemaker.aws_iam_role_policy_attachment.sagemaker_full_access","module_address":"module.sagemaker","mode":"managed","type":"aws_iam_role_policy_attachment","name":"sagemaker_full_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSageMakerFullAccess","role":"whisper-sagemaker-sagemaker-execution-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.sagemaker.aws_sagemaker_endpoint.whisper","module_address":"module.sagemaker","mode":"managed","type":"aws_sagemaker_endpoint","name":"whisper","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deployment_config":[],"endpoint_config_name":"whisper-sagemaker-whisper-endpoint-config","name":"whisper-sagemaker-whisper-endpoint","tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"deployment_config":[],"id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"deployment_config":[],"tags":{},"tags_all":{}}}},{"address":"module.sagemaker.aws_sagemaker_endpoint_configuration.whisper","module_address":"module.sagemaker","mode":"managed","type":"aws_sagemaker_endpoint_configuration","name":"whisper","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"async_inference_config":[],"data_capture_config":[],"kms_key_arn":null,"name":"whisper-sagemaker-whisper-endpoint-config","production_variants":[{"accelerator_type":null,"container_startup_health_check_timeout_in_seconds":null,"core_dump_config":[],"enable_ssm_access":null,"inference_ami_version":null,"initial_instance_count":1,"initial_variant_weight":1,"instance_type":"ml.g4dn.xlarge","managed_instance_scaling":[],"model_data_download_timeout_in_seconds":null,"model_name":"whisper-sagemaker-whisper-model","routing_config":[],"serverless_config":[],"variant_name":"AllTraffic"}],"shadow_production_variants":[],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint-config","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-endpoint-config","Project":"whisper-sagemaker"}},"after_unknown":{"arn":true,"async_inference_config":[],"data_capture_config":[],"id":true,"name_prefix":true,"production_variants":[{"core_dump_config":[],"managed_instance_scaling":[],"routing_config":[],"serverless_config":[],"volume_size_in_gb":true}],"shadow_production_variants":[],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"async_inference_config":[],"data_capture_config":[],"production_variants":[{"core_dump_config":[],"managed_instance_scaling":[],"routing_config":[],"serverless_config":[]}],"shadow_production_variants":[],"tags":{},"tags_all":{}}}},{"address":"module.sagemaker.aws_sagemaker_model.whisper","module_address":"module.sagemaker","mode":"managed","type":"aws_sagemaker_model","name":"whisper","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"container":[],"enable_network_isolation":null,"name":"whisper-sagemaker-whisper-model","primary_container":[{"container_hostname":null,"environment":null,"image":"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-inference:latest","image_config":[],"inference_specification_name":null,"mode":"SingleModel","model_data_url":"s3://sagemaker-models-654654436000-eu-west-1/whisper-large-v3-turbo/model.tar.gz","model_package_name":null,"multi_model_config":[]}],"tags":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-model","Project":"whisper-sagemaker"},"tags_all":{"Environment":"production","ManagedBy":"Terraform","Name":"whisper-sagemaker-whisper-model","Project":"whisper-sagemaker"},"vpc_config":[{}]},"after_unknown":{"arn":true,"container":[],"execution_role_arn":true,"id":true,"inference_execution_config":true,"primary_container":[{"image_config":[],"model_data_source":true,"multi_model_config":[]}],"tags":{},"tags_all":{},"vpc_config":[{"security_group_ids":true,"subnets":true}]},"before_sensitive":false,"after_sensitive":{"container":[],"inference_execution_config":[],"primary_container":[{"image_config":[],"model_data_source":[],"multi_model_config":[]}],"tags":{},"tags_all":{},"vpc_config":[{"security_group_ids":[],"subnets":[]}]}}}],"output_changes":{"alb_dns_name":{"actions":["update"],"before":"whisper-sagemaker-alb-299033305.eu-west-1.elb.amazonaws.com","after_unknown":true,"before_sensitive":false,"after_sensitive":false},"alb_url":{"actions":["update"],"before":"http://whisper-sagemaker-alb-299033305.eu-west-1.elb.amazonaws.com","after_unknown":true,"before_sensitive":false,"after_sensitive":false},"api_service_name":{"actions":["no-op"],"before":"whisper-sagemaker-api-service","after":"whisper-sagemaker-api-service","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"cloudwatch_dashboard_name":{"actions":["no-op"],"before":"whisper-sagemaker-dashboard","after":"whisper-sagemaker-dashboard","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"cloudwatch_log_group":{"actions":["no-op"],"before":"/ecs/whisper-sagemaker","after":"/ecs/whisper-sagemaker","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"deployment_summary":{"actions":["update"],"before":{"application_url":"http://whisper-sagemaker-alb-299033305.eu-west-1.elb.amazonaws.com","cloudwatch_dashboard":"whisper-sagemaker-dashboard","ecs_cluster":"whisper-sagemaker-cluster","region":"eu-west-1","sagemaker_endpoint":"whisper-sagemaker-whisper-endpoint"},"after":{"cloudwatch_dashboard":"whisper-sagemaker-dashboard","ecs_cluster":"whisper-sagemaker-cluster","region":"eu-west-1","sagemaker_endpoint":"whisper-sagemaker-whisper-endpoint"},"after_unknown":{"application_url":true},"before_sensitive":false,"after_sensitive":false},"ecr_api_repository_url":{"actions":["update"],"before":"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-api","after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ecr_frontend_repository_url":{"actions":["update"],"before":"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-frontend","after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ecs_cluster_arn":{"actions":["update"],"before":"arn:aws:ecs:eu-west-1:654654436000:cluster/whisper-sagemaker-cluster","after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ecs_cluster_name":{"actions":["no-op"],"before":"whisper-sagemaker-cluster","after":"whisper-sagemaker-cluster","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"frontend_service_name":{"actions":["no-op"],"before":"whisper-sagemaker-frontend-service","after":"whisper-sagemaker-frontend-service","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"sagemaker_endpoint_arn":{"actions":["update"],"before":"arn:aws:sagemaker:eu-west-1:654654436000:endpoint/whisper-sagemaker-whisper-endpoint","after_unknown":true,"before_sensitive":false,"after_sensitive":false},"sagemaker_endpoint_name":{"actions":["no-op"],"before":"whisper-sagemaker-whisper-endpoint","after":"whisper-sagemaker-whisper-endpoint","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"sagemaker_model_name":{"actions":["no-op"],"before":"whisper-sagemaker-whisper-model","after":"whisper-sagemaker-whisper-model","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"vpc_id":{"actions":["update"],"before":"vpc-0b6914935cae3a5c5","after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.12.2","values":{"outputs":{"alb_dns_name":{"sensitive":false,"value":"whisper-sagemaker-alb-299033305.eu-west-1.elb.amazonaws.com","type":"string"},"alb_url":{"sensitive":false,"value":"http://whisper-sagemaker-alb-299033305.eu-west-1.elb.amazonaws.com","type":"string"},"api_service_name":{"sensitive":false,"value":"whisper-sagemaker-api-service","type":"string"},"cloudwatch_dashboard_name":{"sensitive":false,"value":"whisper-sagemaker-dashboard","type":"string"},"cloudwatch_log_group":{"sensitive":false,"value":"/ecs/whisper-sagemaker","type":"string"},"deployment_summary":{"sensitive":false,"value":{"application_url":"http://whisper-sagemaker-alb-299033305.eu-west-1.elb.amazonaws.com","cloudwatch_dashboard":"whisper-sagemaker-dashboard","ecs_cluster":"whisper-sagemaker-cluster","region":"eu-west-1","sagemaker_endpoint":"whisper-sagemaker-whisper-endpoint"},"type":["object",{"application_url":"string","cloudwatch_dashboard":"string","ecs_cluster":"string","region":"string","sagemaker_endpoint":"string"}]},"ecr_api_repository_url":{"sensitive":false,"value":"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-api","type":"string"},"ecr_frontend_repository_url":{"sensitive":false,"value":"654654436000.dkr.ecr.eu-west-1.amazonaws.com/whisper-sagemaker-frontend","type":"string"},"ecs_cluster_arn":{"sensitive":false,"value":"arn:aws:ecs:eu-west-1:654654436000:cluster/whisper-sagemaker-cluster","type":"string"},"ecs_cluster_name":{"sensitive":false,"value":"whisper-sagemaker-cluster","type":"string"},"frontend_service_name":{"sensitive":false,"value":"whisper-sagemaker-frontend-service","type":"string"},"sagemaker_endpoint_arn":{"sensitive":false,"value":"arn:aws:sagemaker:eu-west-1:654654436000:endpoint/whisper-sagemaker-whisper-endpoint","type":"string"},"sagemaker_endpoint_name":{"sensitive":false,"value":"whisper-sagemaker-whisper-endpoint","type":"string"},"sagemaker_model_name":{"sensitive":false,"value":"whisper-sagemaker-whisper-model","type":"string"},"vpc_id":{"sensitive":false,"value":"vpc-0b6914935cae3a5c5","type":"string"}},"root_module":{}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.0","expressions":{"default_tags":[{"tags":{"references":["var.common_tags"]}}],"region":{"references":["var.aws_region"]}}}},"root_module":{"outputs":{"alb_dns_name":{"expression":{"references":["module.networking.alb_dns_name","module.networking"]},"description":"DNS name of the Application Load Balancer"},"alb_url":{"expression":{"references":["var.enable_https","module.networking.alb_dns_name","module.networking","module.networking.alb_dns_name","module.networking"]},"description":"URL of the Application Load Balancer"},"api_service_name":{"expression":{"references":["module.ecs.api_service_name","module.ecs"]},"description":"Name of the API ECS service"},"cloudwatch_dashboard_name":{"expression":{"references":["aws_cloudwatch_dashboard.main.dashboard_name","aws_cloudwatch_dashboard.main"]},"description":"Name of the CloudWatch dashboard"},"cloudwatch_log_group":{"expression":{"references":["module.ecs.log_group_name","module.ecs"]},"description":"Name of the ECS CloudWatch log group"},"deployment_summary":{"expression":{"references":["var.enable_https","module.networking.alb_dns_name","module.networking","module.networking.alb_dns_name","module.networking","module.sagemaker.endpoint_name","module.sagemaker","module.ecs.cluster_name","module.ecs","aws_cloudwatch_dashboard.main.dashboard_name","aws_cloudwatch_dashboard.main","var.aws_region"]},"description":"Summary of deployed resources"},"ecr_api_repository_url":{"expression":{"references":["module.ecr_api.repository_url","module.ecr_api"]},"description":"URL of the API ECR repository"},"ecr_frontend_repository_url":{"expression":{"references":["module.ecr_frontend.repository_url","module.ecr_frontend"]},"description":"URL of the Frontend ECR repository"},"ecs_cluster_arn":{"expression":{"references":["module.ecs.cluster_arn","module.ecs"]},"description":"ARN of the ECS cluster"},"ecs_cluster_name":{"expression":{"references":["module.ecs.cluster_name","module.ecs"]},"description":"Name of the ECS cluster"},"frontend_service_name":{"expression":{"references":["module.ecs.frontend_service_name","module.ecs"]},"description":"Name of the Frontend ECS service"},"sagemaker_endpoint_arn":{"expression":{"references":["module.sagemaker.endpoint_arn","module.sagemaker"]},"description":"ARN of the SageMaker endpoint"},"sagemaker_endpoint_name":{"expression":{"references":["module.sagemaker.endpoint_name","module.sagemaker"]},"description":"Name of the SageMaker endpoint"},"sagemaker_model_name":{"expression":{"references":["module.sagemaker.model_name","module.sagemaker"]},"description":"Name of the SageMaker model"},"vpc_id":{"expression":{"references":["module.networking.vpc_id","module.networking"]},"description":"ID of the VPC"}},"resources":[{"address":"aws_cloudwatch_dashboard.main","mode":"managed","type":"aws_cloudwatch_dashboard","name":"main","provider_config_key":"aws","expressions":{"dashboard_body":{"references":["var.aws_region","var.aws_region","module.ecs.api_service_name","module.ecs","module.ecs.cluster_name","module.ecs","module.ecs.frontend_service_name","module.ecs","var.aws_region","module.networking.alb_arn","module.networking","var.aws_region"]},"dashboard_name":{"references":["var.project_name"]}},"schema_version":0}],"module_calls":{"ecr_api":{"source":"./modules/ecr","expressions":{"enable_default_lifecycle_policy":{"constant_value":true},"image_tag_mutability":{"constant_value":"MUTABLE"},"max_image_count":{"constant_value":30},"repository_name":{"references":["var.project_name"]},"scan_on_push":{"constant_value":true},"tags":{"references":["var.common_tags"]},"untagged_image_days":{"constant_value":7}},"module":{"outputs":{"registry_id":{"expression":{"references":["aws_ecr_repository.this.registry_id","aws_ecr_repository.this"]},"description":"Registry ID where the repository was created"},"repository_arn":{"expression":{"references":["aws_ecr_repository.this.arn","aws_ecr_repository.this"]},"description":"ARN of the ECR repository"},"repository_name":{"expression":{"references":["aws_ecr_repository.this.name","aws_ecr_repository.this"]},"description":"Name of the ECR repository"},"repository_url":{"expression":{"references":["aws_ecr_repository.this.repository_url","aws_ecr_repository.this"]},"description":"URL of the ECR repository"}},"resources":[{"address":"aws_ecr_lifecycle_policy.default","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"default","provider_config_key":"aws","expressions":{"policy":{"references":["var.untagged_image_days","var.untagged_image_days","var.max_image_count","var.max_image_count"]},"repository":{"references":["aws_ecr_repository.this.name","aws_ecr_repository.this"]}},"schema_version":0,"count_expression":{"references":["var.lifecycle_policy","var.enable_default_lifecycle_policy"]}},{"address":"aws_ecr_lifecycle_policy.this","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"this","provider_config_key":"aws","expressions":{"policy":{"references":["var.lifecycle_policy"]},"repository":{"references":["aws_ecr_repository.this.name","aws_ecr_repository.this"]}},"schema_version":0,"count_expression":{"references":["var.lifecycle_policy"]}},{"address":"aws_ecr_repository.this","mode":"managed","type":"aws_ecr_repository","name":"this","provider_config_key":"aws","expressions":{"encryption_configuration":[{"encryption_type":{"references":["var.encryption_type"]},"kms_key":{"references":["var.kms_key_arn"]}}],"image_scanning_configuration":[{"scan_on_push":{"references":["var.scan_on_push"]}}],"image_tag_mutability":{"references":["var.image_tag_mutability"]},"name":{"references":["var.repository_name"]},"tags":{"references":["var.tags","var.repository_name"]}},"schema_version":0},{"address":"aws_ecr_repository_policy.this","mode":"managed","type":"aws_ecr_repository_policy","name":"this","provider_config_key":"aws","expressions":{"policy":{"references":["var.repository_policy"]},"repository":{"references":["aws_ecr_repository.this.name","aws_ecr_repository.this"]}},"schema_version":0,"count_expression":{"references":["var.repository_policy"]}}],"variables":{"enable_default_lifecycle_policy":{"default":true,"description":"Whether to enable the default lifecycle policy"},"encryption_type":{"default":"AES256","description":"The encryption type to use for the repository (AES256 or KMS)"},"image_tag_mutability":{"default":"MUTABLE","description":"The tag mutability setting for the repository (MUTABLE or IMMUTABLE)"},"kms_key_arn":{"default":null,"description":"The ARN of the KMS key to use when encryption_type is KMS"},"lifecycle_policy":{"default":null,"description":"Custom lifecycle policy for the repository (JSON string)"},"max_image_count":{"default":30,"description":"Maximum number of images to keep (for default lifecycle policy)"},"repository_name":{"description":"Name of the ECR repository"},"repository_policy":{"default":null,"description":"Custom repository policy (JSON string)"},"scan_on_push":{"default":true,"description":"Indicates whether images are scanned after being pushed to the repository"},"tags":{"default":{},"description":"Tags to apply to the repository"},"untagged_image_days":{"default":7,"description":"Number of days to keep untagged images (for default lifecycle policy)"}}}},"ecr_frontend":{"source":"./modules/ecr","expressions":{"enable_default_lifecycle_policy":{"constant_value":true},"image_tag_mutability":{"constant_value":"MUTABLE"},"max_image_count":{"constant_value":30},"repository_name":{"references":["var.project_name"]},"scan_on_push":{"constant_value":true},"tags":{"references":["var.common_tags"]},"untagged_image_days":{"constant_value":7}},"module":{"outputs":{"registry_id":{"expression":{"references":["aws_ecr_repository.this.registry_id","aws_ecr_repository.this"]},"description":"Registry ID where the repository was created"},"repository_arn":{"expression":{"references":["aws_ecr_repository.this.arn","aws_ecr_repository.this"]},"description":"ARN of the ECR repository"},"repository_name":{"expression":{"references":["aws_ecr_repository.this.name","aws_ecr_repository.this"]},"description":"Name of the ECR repository"},"repository_url":{"expression":{"references":["aws_ecr_repository.this.repository_url","aws_ecr_repository.this"]},"description":"URL of the ECR repository"}},"resources":[{"address":"aws_ecr_lifecycle_policy.default","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"default","provider_config_key":"aws","expressions":{"policy":{"references":["var.untagged_image_days","var.untagged_image_days","var.max_image_count","var.max_image_count"]},"repository":{"references":["aws_ecr_repository.this.name","aws_ecr_repository.this"]}},"schema_version":0,"count_expression":{"references":["var.lifecycle_policy","var.enable_default_lifecycle_policy"]}},{"address":"aws_ecr_lifecycle_policy.this","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"this","provider_config_key":"aws","expressions":{"policy":{"references":["var.lifecycle_policy"]},"repository":{"references":["aws_ecr_repository.this.name","aws_ecr_repository.this"]}},"schema_version":0,"count_expression":{"references":["var.lifecycle_policy"]}},{"address":"aws_ecr_repository.this","mode":"managed","type":"aws_ecr_repository","name":"this","provider_config_key":"aws","expressions":{"encryption_configuration":[{"encryption_type":{"references":["var.encryption_type"]},"kms_key":{"references":["var.kms_key_arn"]}}],"image_scanning_configuration":[{"scan_on_push":{"references":["var.scan_on_push"]}}],"image_tag_mutability":{"references":["var.image_tag_mutability"]},"name":{"references":["var.repository_name"]},"tags":{"references":["var.tags","var.repository_name"]}},"schema_version":0},{"address":"aws_ecr_repository_policy.this","mode":"managed","type":"aws_ecr_repository_policy","name":"this","provider_config_key":"aws","expressions":{"policy":{"references":["var.repository_policy"]},"repository":{"references":["aws_ecr_repository.this.name","aws_ecr_repository.this"]}},"schema_version":0,"count_expression":{"references":["var.repository_policy"]}}],"variables":{"enable_default_lifecycle_policy":{"default":true,"description":"Whether to enable the default lifecycle policy"},"encryption_type":{"default":"AES256","description":"The encryption type to use for the repository (AES256 or KMS)"},"image_tag_mutability":{"default":"MUTABLE","description":"The tag mutability setting for the repository (MUTABLE or IMMUTABLE)"},"kms_key_arn":{"default":null,"description":"The ARN of the KMS key to use when encryption_type is KMS"},"lifecycle_policy":{"default":null,"description":"Custom lifecycle policy for the repository (JSON string)"},"max_image_count":{"default":30,"description":"Maximum number of images to keep (for default lifecycle policy)"},"repository_name":{"description":"Name of the ECR repository"},"repository_policy":{"default":null,"description":"Custom repository policy (JSON string)"},"scan_on_push":{"default":true,"description":"Indicates whether images are scanned after being pushed to the repository"},"tags":{"default":{},"description":"Tags to apply to the repository"},"untagged_image_days":{"default":7,"description":"Number of days to keep untagged images (for default lifecycle policy)"}}}},"ecs":{"source":"./modules/ecs","expressions":{"alb_listener_arn":{"references":["module.networking.http_listener_arn","module.networking"]},"api_container_port":{"references":["var.api_container_port"]},"api_cpu":{"references":["var.api_cpu"]},"api_cpu_target":{"references":["var.api_cpu_target"]},"api_desired_count":{"references":["var.api_desired_count"]},"api_environment":{"references":["var.api_environment"]},"api_image_uri":{"references":["module.ecr_api.repository_url","module.ecr_api"]},"api_max_capacity":{"references":["var.api_max_capacity"]},"api_memory":{"references":["var.api_memory"]},"api_min_capacity":{"references":["var.api_min_capacity"]},"api_target_group_arn":{"references":["module.networking.api_target_group_arn","module.networking"]},"api_url":{"references":["module.networking.alb_dns_name","module.networking"]},"aws_region":{"references":["var.aws_region"]},"ecs_security_group_ids":{"references":["module.networking.ecs_security_group_id","module.networking"]},"enable_api_autoscaling":{"references":["var.api_enable_autoscaling"]},"enable_container_insights":{"constant_value":true},"enable_frontend_autoscaling":{"references":["var.frontend_enable_autoscaling"]},"frontend_container_port":{"references":["var.frontend_container_port"]},"frontend_cpu":{"references":["var.frontend_cpu"]},"frontend_cpu_target":{"references":["var.frontend_cpu_target"]},"frontend_desired_count":{"references":["var.frontend_desired_count"]},"frontend_environment":{"references":["var.frontend_environment"]},"frontend_image_uri":{"references":["module.ecr_frontend.repository_url","module.ecr_frontend"]},"frontend_max_capacity":{"references":["var.frontend_max_capacity"]},"frontend_memory":{"references":["var.frontend_memory"]},"frontend_min_capacity":{"references":["var.frontend_min_capacity"]},"frontend_target_group_arn":{"references":["module.networking.frontend_target_group_arn","module.networking"]},"log_retention_days":{"constant_value":30},"private_subnet_ids":{"references":["module.networking.private_subnet_ids","module.networking"]},"project_name":{"references":["var.project_name"]},"sagemaker_endpoint_arn":{"references":["module.sagemaker.endpoint_arn","module.sagemaker"]},"sagemaker_endpoint_name":{"references":["module.sagemaker.endpoint_name","module.sagemaker"]},"tags":{"references":["var.common_tags"]}},"module":{"outputs":{"api_autoscaling_target_id":{"expression":{"references":["var.enable_api_autoscaling","aws_appautoscaling_target.api[0].id","aws_appautoscaling_target.api[0]","aws_appautoscaling_target.api"]},"description":"ID of the API auto-scaling target (if enabled)"},"api_service_id":{"expression":{"references":["aws_ecs_service.api.id","aws_ecs_service.api"]},"description":"ID of the API ECS service"},"api_service_name":{"expression":{"references":["aws_ecs_service.api.name","aws_ecs_service.api"]},"description":"Name of the API ECS service"},"api_task_definition_arn":{"expression":{"references":["aws_ecs_task_definition.api.arn","aws_ecs_task_definition.api"]},"description":"ARN of the API task definition"},"cluster_arn":{"expression":{"references":["aws_ecs_cluster.main.arn","aws_ecs_cluster.main"]},"description":"ARN of the ECS cluster"},"cluster_id":{"expression":{"references":["aws_ecs_cluster.main.id","aws_ecs_cluster.main"]},"description":"ID of the ECS cluster"},"cluster_name":{"expression":{"references":["aws_ecs_cluster.main.name","aws_ecs_cluster.main"]},"description":"Name of the ECS cluster"},"frontend_autoscaling_target_id":{"expression":{"references":["var.enable_frontend_autoscaling","aws_appautoscaling_target.frontend[0].id","aws_appautoscaling_target.frontend[0]","aws_appautoscaling_target.frontend"]},"description":"ID of the frontend auto-scaling target (if enabled)"},"frontend_service_id":{"expression":{"references":["aws_ecs_service.frontend.id","aws_ecs_service.frontend"]},"description":"ID of the frontend ECS service"},"frontend_service_name":{"expression":{"references":["aws_ecs_service.frontend.name","aws_ecs_service.frontend"]},"description":"Name of the frontend ECS service"},"frontend_task_definition_arn":{"expression":{"references":["aws_ecs_task_definition.frontend.arn","aws_ecs_task_definition.frontend"]},"description":"ARN of the frontend task definition"},"log_group_name":{"expression":{"references":["aws_cloudwatch_log_group.ecs_logs.name","aws_cloudwatch_log_group.ecs_logs"]},"description":"Name of the CloudWatch log group"},"task_execution_role_arn":{"expression":{"references":["aws_iam_role.task_execution_role.arn","aws_iam_role.task_execution_role"]},"description":"ARN of the ECS task execution role"},"task_role_arn":{"expression":{"references":["aws_iam_role.task_role.arn","aws_iam_role.task_role"]},"description":"ARN of the ECS task role"}},"resources":[{"address":"aws_appautoscaling_policy.api_cpu","mode":"managed","type":"aws_appautoscaling_policy","name":"api_cpu","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name"]},"policy_type":{"constant_value":"TargetTrackingScaling"},"resource_id":{"references":["aws_appautoscaling_target.api[0].resource_id","aws_appautoscaling_target.api[0]","aws_appautoscaling_target.api"]},"scalable_dimension":{"references":["aws_appautoscaling_target.api[0].scalable_dimension","aws_appautoscaling_target.api[0]","aws_appautoscaling_target.api"]},"service_namespace":{"references":["aws_appautoscaling_target.api[0].service_namespace","aws_appautoscaling_target.api[0]","aws_appautoscaling_target.api"]},"target_tracking_scaling_policy_configuration":[{"predefined_metric_specification":[{"predefined_metric_type":{"constant_value":"ECSServiceAverageCPUUtilization"}}],"scale_in_cooldown":{"constant_value":300},"scale_out_cooldown":{"constant_value":60},"target_value":{"references":["var.api_cpu_target"]}}]},"schema_version":0,"count_expression":{"references":["var.enable_api_autoscaling"]}},{"address":"aws_appautoscaling_policy.frontend_cpu","mode":"managed","type":"aws_appautoscaling_policy","name":"frontend_cpu","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name"]},"policy_type":{"constant_value":"TargetTrackingScaling"},"resource_id":{"references":["aws_appautoscaling_target.frontend[0].resource_id","aws_appautoscaling_target.frontend[0]","aws_appautoscaling_target.frontend"]},"scalable_dimension":{"references":["aws_appautoscaling_target.frontend[0].scalable_dimension","aws_appautoscaling_target.frontend[0]","aws_appautoscaling_target.frontend"]},"service_namespace":{"references":["aws_appautoscaling_target.frontend[0].service_namespace","aws_appautoscaling_target.frontend[0]","aws_appautoscaling_target.frontend"]},"target_tracking_scaling_policy_configuration":[{"predefined_metric_specification":[{"predefined_metric_type":{"constant_value":"ECSServiceAverageCPUUtilization"}}],"scale_in_cooldown":{"constant_value":300},"scale_out_cooldown":{"constant_value":60},"target_value":{"references":["var.frontend_cpu_target"]}}]},"schema_version":0,"count_expression":{"references":["var.enable_frontend_autoscaling"]}},{"address":"aws_appautoscaling_target.api","mode":"managed","type":"aws_appautoscaling_target","name":"api","provider_config_key":"aws","expressions":{"max_capacity":{"references":["var.api_max_capacity"]},"min_capacity":{"references":["var.api_min_capacity"]},"resource_id":{"references":["aws_ecs_cluster.main.name","aws_ecs_cluster.main","aws_ecs_service.api.name","aws_ecs_service.api"]},"scalable_dimension":{"constant_value":"ecs:service:DesiredCount"},"service_namespace":{"constant_value":"ecs"}},"schema_version":0,"count_expression":{"references":["var.enable_api_autoscaling"]}},{"address":"aws_appautoscaling_target.frontend","mode":"managed","type":"aws_appautoscaling_target","name":"frontend","provider_config_key":"aws","expressions":{"max_capacity":{"references":["var.frontend_max_capacity"]},"min_capacity":{"references":["var.frontend_min_capacity"]},"resource_id":{"references":["aws_ecs_cluster.main.name","aws_ecs_cluster.main","aws_ecs_service.frontend.name","aws_ecs_service.frontend"]},"scalable_dimension":{"constant_value":"ecs:service:DesiredCount"},"service_namespace":{"constant_value":"ecs"}},"schema_version":0,"count_expression":{"references":["var.enable_frontend_autoscaling"]}},{"address":"aws_cloudwatch_log_group.ecs_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"ecs_logs","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name"]},"retention_in_days":{"references":["var.log_retention_days"]},"tags":{"references":["var.tags","var.project_name"]}},"schema_version":0},{"address":"aws_ecs_cluster.main","mode":"managed","type":"aws_ecs_cluster","name":"main","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name"]},"setting":[{"name":{"constant_value":"containerInsights"},"value":{"references":["var.enable_container_insights"]}}],"tags":{"references":["var.tags","var.project_name"]}},"schema_version":0},{"address":"aws_ecs_service.api","mode":"managed","type":"aws_ecs_service","name":"api","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.main.id","aws_ecs_cluster.main"]},"desired_count":{"references":["var.api_desired_count"]},"launch_type":{"constant_value":"FARGATE"},"load_balancer":[{"container_name":{"constant_value":"api"},"container_port":{"references":["var.api_container_port"]},"target_group_arn":{"references":["var.api_target_group_arn"]}}],"name":{"references":["var.project_name"]},"network_configuration":[{"assign_public_ip":{"constant_value":false},"security_groups":{"references":["var.ecs_security_group_ids"]},"subnets":{"references":["var.private_subnet_ids"]}}],"tags":{"references":["var.tags","var.project_name"]},"task_definition":{"references":["aws_ecs_task_definition.api.arn","aws_ecs_task_definition.api"]}},"schema_version":1,"depends_on":["var.alb_listener_arn"]},{"address":"aws_ecs_service.frontend","mode":"managed","type":"aws_ecs_service","name":"frontend","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.main.id","aws_ecs_cluster.main"]},"desired_count":{"references":["var.frontend_desired_count"]},"launch_type":{"constant_value":"FARGATE"},"load_balancer":[{"container_name":{"constant_value":"frontend"},"container_port":{"references":["var.frontend_container_port"]},"target_group_arn":{"references":["var.frontend_target_group_arn"]}}],"name":{"references":["var.project_name"]},"network_configuration":[{"assign_public_ip":{"constant_value":false},"security_groups":{"references":["var.ecs_security_group_ids"]},"subnets":{"references":["var.private_subnet_ids"]}}],"tags":{"references":["var.tags","var.project_name"]},"task_definition":{"references":["aws_ecs_task_definition.frontend.arn","aws_ecs_task_definition.frontend"]}},"schema_version":1,"depends_on":["var.alb_listener_arn"]},{"address":"aws_ecs_task_definition.api","mode":"managed","type":"aws_ecs_task_definition","name":"api","provider_config_key":"aws","expressions":{"container_definitions":{"references":["var.api_image_uri","var.api_container_port","var.sagemaker_endpoint_name","var.aws_region","var.api_environment","aws_cloudwatch_log_group.ecs_logs.name","aws_cloudwatch_log_group.ecs_logs","var.aws_region","var.api_health_check"]},"cpu":{"references":["var.api_cpu"]},"execution_role_arn":{"references":["aws_iam_role.task_execution_role.arn","aws_iam_role.task_execution_role"]},"family":{"references":["var.project_name"]},"memory":{"references":["var.api_memory"]},"network_mode":{"constant_value":"awsvpc"},"requires_compatibilities":{"constant_value":["FARGATE"]},"tags":{"references":["var.tags","var.project_name"]},"task_role_arn":{"references":["aws_iam_role.task_role.arn","aws_iam_role.task_role"]}},"schema_version":1},{"address":"aws_ecs_task_definition.frontend","mode":"managed","type":"aws_ecs_task_definition","name":"frontend","provider_config_key":"aws","expressions":{"container_definitions":{"references":["var.frontend_image_uri","var.frontend_container_port","var.api_url","var.frontend_environment","aws_cloudwatch_log_group.ecs_logs.name","aws_cloudwatch_log_group.ecs_logs","var.aws_region","var.frontend_health_check"]},"cpu":{"references":["var.frontend_cpu"]},"execution_role_arn":{"references":["aws_iam_role.task_execution_role.arn","aws_iam_role.task_execution_role"]},"family":{"references":["var.project_name"]},"memory":{"references":["var.frontend_memory"]},"network_mode":{"constant_value":"awsvpc"},"requires_compatibilities":{"constant_value":["FARGATE"]},"tags":{"references":["var.tags","var.project_name"]},"task_role_arn":{"references":["aws_iam_role.task_role.arn","aws_iam_role.task_role"]}},"schema_version":1},{"address":"aws_iam_role.task_execution_role","mode":"managed","type":"aws_iam_role","name":"task_execution_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["var.project_name"]},"tags":{"references":["var.tags","var.project_name"]}},"schema_version":0},{"address":"aws_iam_role.task_role","mode":"managed","type":"aws_iam_role","name":"task_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["var.project_name"]},"tags":{"references":["var.tags","var.project_name"]}},"schema_version":0},{"address":"aws_iam_role_policy.sagemaker_invoke_policy","mode":"managed","type":"aws_iam_role_policy","name":"sagemaker_invoke_policy","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name"]},"policy":{"references":["var.sagemaker_endpoint_arn"]},"role":{"references":["aws_iam_role.task_role.id","aws_iam_role.task_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.task_execution_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"task_execution_role_policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"},"role":{"references":["aws_iam_role.task_execution_role.name","aws_iam_role.task_execution_role"]}},"schema_version":0}],"variables":{"alb_listener_arn":{"description":"ARN of the ALB listener (for dependency)"},"api_container_port":{"default":8080,"description":"Container port for API service"},"api_cpu":{"default":"512","description":"CPU units for API task (256, 512, 1024, 2048, 4096)"},"api_cpu_target":{"default":70,"description":"Target CPU utilization percentage for API auto-scaling"},"api_desired_count":{"default":2,"description":"Desired number of API tasks"},"api_environment":{"default":{},"description":"Environment variables for API service"},"api_health_check":{"default":{"command":["CMD-SHELL","curl -f http://localhost:8080/health || exit 1"],"interval":30,"retries":3,"startPeriod":60,"timeout":5},"description":"Health check configuration for API container"},"api_image_uri":{"description":"Docker image URI for API service"},"api_max_capacity":{"default":10,"description":"Maximum number of API tasks for auto-scaling"},"api_memory":{"default":"1024","description":"Memory (MB) for API task"},"api_min_capacity":{"default":1,"description":"Minimum number of API tasks for auto-scaling"},"api_target_group_arn":{"description":"ARN of the target group for API service"},"api_url":{"default":"","description":"URL of the API service (for frontend)"},"aws_region":{"description":"AWS region"},"ecs_security_group_ids":{"description":"List of security group IDs for ECS tasks"},"enable_api_autoscaling":{"default":true,"description":"Whether to enable auto-scaling for API service"},"enable_container_insights":{"default":true,"description":"Whether to enable CloudWatch Container Insights"},"enable_frontend_autoscaling":{"default":true,"description":"Whether to enable auto-scaling for frontend service"},"frontend_container_port":{"default":3000,"description":"Container port for frontend service"},"frontend_cpu":{"default":"256","description":"CPU units for frontend task (256, 512, 1024, 2048, 4096)"},"frontend_cpu_target":{"default":70,"description":"Target CPU utilization percentage for frontend auto-scaling"},"frontend_desired_count":{"default":2,"description":"Desired number of frontend tasks"},"frontend_environment":{"default":{},"description":"Environment variables for frontend service"},"frontend_health_check":{"default":{"command":["CMD-SHELL","curl -f http://localhost:3000 || exit 1"],"interval":30,"retries":3,"startPeriod":60,"timeout":5},"description":"Health check configuration for frontend container"},"frontend_image_uri":{"description":"Docker image URI for frontend service"},"frontend_max_capacity":{"default":10,"description":"Maximum number of frontend tasks for auto-scaling"},"frontend_memory":{"default":"512","description":"Memory (MB) for frontend task"},"frontend_min_capacity":{"default":1,"description":"Minimum number of frontend tasks for auto-scaling"},"frontend_target_group_arn":{"description":"ARN of the target group for frontend service"},"log_retention_days":{"default":30,"description":"CloudWatch log retention in days"},"private_subnet_ids":{"description":"List of private subnet IDs for ECS tasks"},"project_name":{"description":"Name of the project, used for resource naming"},"sagemaker_endpoint_arn":{"description":"ARN of the SageMaker endpoint"},"sagemaker_endpoint_name":{"description":"Name of the SageMaker endpoint"},"tags":{"default":{},"description":"Tags to apply to all resources"}}},"depends_on":["module.sagemaker","module.networking"]},"networking":{"source":"./modules/networking","expressions":{"api_health_check_path":{"references":["var.api_health_check_path"]},"api_port":{"references":["var.api_container_port"]},"availability_zones":{"references":["var.availability_zones"]},"aws_region":{"references":["var.aws_region"]},"certificate_arn":{"references":["var.certificate_arn"]},"create_nat_gateway":{"references":["var.create_nat_gateway"]},"enable_deletion_protection":{"references":["var.enable_deletion_protection"]},"enable_https":{"references":["var.enable_https"]},"frontend_health_check_path":{"references":["var.frontend_health_check_path"]},"frontend_port":{"references":["var.frontend_container_port"]},"private_subnet_cidrs":{"references":["var.private_subnet_cidrs"]},"project_name":{"references":["var.project_name"]},"public_subnet_cidrs":{"references":["var.public_subnet_cidrs"]},"tags":{"references":["var.common_tags"]},"vpc_cidr":{"references":["var.vpc_cidr"]}},"module":{"outputs":{"alb_arn":{"expression":{"references":["aws_lb.main.arn","aws_lb.main"]},"description":"ARN of the Application Load Balancer"},"alb_dns_name":{"expression":{"references":["aws_lb.main.dns_name","aws_lb.main"]},"description":"DNS name of the Application Load Balancer"},"alb_id":{"expression":{"references":["aws_lb.main.id","aws_lb.main"]},"description":"ID of the Application Load Balancer"},"alb_security_group_id":{"expression":{"references":["aws_security_group.alb.id","aws_security_group.alb"]},"description":"ID of the ALB security group"},"alb_zone_id":{"expression":{"references":["aws_lb.main.zone_id","aws_lb.main"]},"description":"Zone ID of the Application Load Balancer"},"api_target_group_arn":{"expression":{"references":["aws_lb_target_group.api.arn","aws_lb_target_group.api"]},"description":"ARN of the API target group"},"availability_zones":{"expression":{"references":["var.availability_zones"]},"description":"List of availability zones used"},"ecs_security_group_id":{"expression":{"references":["aws_security_group.ecs.id","aws_security_group.ecs"]},"description":"ID of the ECS security group"},"frontend_target_group_arn":{"expression":{"references":["aws_lb_target_group.frontend.arn","aws_lb_target_group.frontend"]},"description":"ARN of the frontend target group"},"http_listener_arn":{"expression":{"references":["aws_lb_listener.http.arn","aws_lb_listener.http"]},"description":"ARN of the HTTP listener"},"https_listener_arn":{"expression":{"references":["var.enable_https","aws_lb_listener.https[0].arn","aws_lb_listener.https[0]","aws_lb_listener.https"]},"description":"ARN of the HTTPS listener (if enabled)"},"internet_gateway_id":{"expression":{"references":["aws_internet_gateway.main.id","aws_internet_gateway.main"]},"description":"ID of the Internet Gateway"},"nat_gateway_ids":{"expression":{"references":["aws_nat_gateway.main"]},"description":"IDs of NAT Gateways"},"private_route_table_ids":{"expression":{"references":["aws_route_table.private"]},"description":"IDs of private route tables"},"private_subnet_ids":{"expression":{"references":["aws_subnet.private"]},"description":"IDs of private subnets"},"public_route_table_id":{"expression":{"references":["aws_route_table.public.id","aws_route_table.public"]},"description":"ID of the public route table"},"public_subnet_ids":{"expression":{"references":["aws_subnet.public"]},"description":"IDs of public subnets"},"sagemaker_security_group_id":{"expression":{"references":["aws_security_group.sagemaker.id","aws_security_group.sagemaker"]},"description":"ID of the SageMaker security group"},"vpc_cidr":{"expression":{"references":["aws_vpc.main.cidr_block","aws_vpc.main"]},"description":"CIDR block of the VPC"},"vpc_id":{"expression":{"references":["aws_vpc.main.id","aws_vpc.main"]},"description":"ID of the VPC"}},"resources":[{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"tags":{"references":["var.tags","var.project_name","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_nat_gateway","var.availability_zones"]},"depends_on":["aws_internet_gateway.main"]},{"address":"aws_internet_gateway.main","mode":"managed","type":"aws_internet_gateway","name":"main","provider_config_key":"aws","expressions":{"tags":{"references":["var.tags","var.project_name"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_lb.main","mode":"managed","type":"aws_lb","name":"main","provider_config_key":"aws","expressions":{"enable_cross_zone_load_balancing":{"constant_value":true},"enable_deletion_protection":{"references":["var.enable_deletion_protection"]},"enable_http2":{"constant_value":true},"internal":{"constant_value":false},"load_balancer_type":{"constant_value":"application"},"name":{"references":["var.project_name"]},"security_groups":{"references":["aws_security_group.alb.id","aws_security_group.alb"]},"subnets":{"references":["aws_subnet.public"]},"tags":{"references":["var.tags","var.project_name"]}},"schema_version":0},{"address":"aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_config_key":"aws","expressions":{"default_action":[{"type":{"references":["var.enable_https"]}}],"load_balancer_arn":{"references":["aws_lb.main.arn","aws_lb.main"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"tags":{"references":["var.tags","var.project_name"]}},"schema_version":0},{"address":"aws_lb_listener.https","mode":"managed","type":"aws_lb_listener","name":"https","provider_config_key":"aws","expressions":{"certificate_arn":{"references":["var.certificate_arn"]},"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.frontend.arn","aws_lb_target_group.frontend"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.main.arn","aws_lb.main"]},"port":{"constant_value":443},"protocol":{"constant_value":"HTTPS"},"ssl_policy":{"constant_value":"ELBSecurityPolicy-TLS13-1-2-2021-06"},"tags":{"references":["var.tags","var.project_name"]}},"schema_version":0,"count_expression":{"references":["var.enable_https"]}},{"address":"aws_lb_listener_rule.api_http","mode":"managed","type":"aws_lb_listener_rule","name":"api_http","provider_config_key":"aws","expressions":{"action":[{"target_group_arn":{"references":["var.enable_https","aws_lb_target_group.api.arn","aws_lb_target_group.api"]},"type":{"references":["var.enable_https"]}}],"condition":[{"path_pattern":[{"values":{"constant_value":["/api/*","/transcribe","/health","/status/*"]}}]}],"listener_arn":{"references":["aws_lb_listener.http.arn","aws_lb_listener.http"]},"priority":{"constant_value":100}},"schema_version":0},{"address":"aws_lb_listener_rule.api_https","mode":"managed","type":"aws_lb_listener_rule","name":"api_https","provider_config_key":"aws","expressions":{"action":[{"target_group_arn":{"references":["aws_lb_target_group.api.arn","aws_lb_target_group.api"]},"type":{"constant_value":"forward"}}],"condition":[{"path_pattern":[{"values":{"constant_value":["/api/*","/transcribe","/health","/status/*"]}}]}],"listener_arn":{"references":["aws_lb_listener.https[0].arn","aws_lb_listener.https[0]","aws_lb_listener.https"]},"priority":{"constant_value":100}},"schema_version":0,"count_expression":{"references":["var.enable_https"]}},{"address":"aws_lb_target_group.api","mode":"managed","type":"aws_lb_target_group","name":"api","provider_config_key":"aws","expressions":{"deregistration_delay":{"constant_value":30},"health_check":[{"enabled":{"constant_value":true},"healthy_threshold":{"constant_value":2},"interval":{"constant_value":30},"matcher":{"constant_value":"200"},"path":{"references":["var.api_health_check_path"]},"timeout":{"constant_value":5},"unhealthy_threshold":{"constant_value":3}}],"name":{"references":["var.project_name"]},"port":{"references":["var.api_port"]},"protocol":{"constant_value":"HTTP"},"tags":{"references":["var.tags","var.project_name"]},"target_type":{"constant_value":"ip"},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_lb_target_group.frontend","mode":"managed","type":"aws_lb_target_group","name":"frontend","provider_config_key":"aws","expressions":{"deregistration_delay":{"constant_value":30},"health_check":[{"enabled":{"constant_value":true},"healthy_threshold":{"constant_value":2},"interval":{"constant_value":30},"matcher":{"constant_value":"200"},"path":{"references":["var.frontend_health_check_path"]},"timeout":{"constant_value":5},"unhealthy_threshold":{"constant_value":3}}],"name":{"references":["var.project_name"]},"port":{"references":["var.frontend_port"]},"protocol":{"constant_value":"HTTP"},"tags":{"references":["var.tags","var.project_name"]},"target_type":{"constant_value":"ip"},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_nat_gateway.main","mode":"managed","type":"aws_nat_gateway","name":"main","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.nat","count.index"]},"subnet_id":{"references":["aws_subnet.public","count.index"]},"tags":{"references":["var.tags","var.project_name","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_nat_gateway","var.availability_zones"]},"depends_on":["aws_internet_gateway.main"]},{"address":"aws_route.private_nat","mode":"managed","type":"aws_route","name":"private_nat","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.main","count.index"]},"route_table_id":{"references":["aws_route_table.private","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_nat_gateway","var.availability_zones"]}},{"address":"aws_route.public_internet","mode":"managed","type":"aws_route","name":"public_internet","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.main.id","aws_internet_gateway.main"]},"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]}},"schema_version":0},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"aws","expressions":{"tags":{"references":["var.tags","var.project_name","count.index"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0,"count_expression":{"references":["var.availability_zones"]}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"aws","expressions":{"tags":{"references":["var.tags","var.project_name"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private","count.index"]},"subnet_id":{"references":["aws_subnet.private","count.index"]}},"schema_version":0,"count_expression":{"references":["var.availability_zones"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public","count.index"]}},"schema_version":0,"count_expression":{"references":["var.availability_zones"]}},{"address":"aws_security_group.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for Application Load Balancer"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP from anywhere","from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"HTTPS from anywhere","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":443}]},"name_prefix":{"references":["var.project_name"]},"tags":{"references":["var.tags","var.project_name"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_security_group.ecs","mode":"managed","type":"aws_security_group","name":"ecs","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for ECS tasks"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["aws_security_group.alb.id","aws_security_group.alb"]},"name_prefix":{"references":["var.project_name"]},"tags":{"references":["var.tags","var.project_name"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_security_group.sagemaker","mode":"managed","type":"aws_security_group","name":"sagemaker","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for SageMaker endpoints"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all outbound traffic","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["aws_security_group.ecs.id","aws_security_group.ecs"]},"name_prefix":{"references":["var.project_name"]},"tags":{"references":["var.tags","var.project_name"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zones","count.index"]},"cidr_block":{"references":["var.private_subnet_cidrs","count.index"]},"tags":{"references":["var.tags","var.project_name","count.index"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1,"count_expression":{"references":["var.availability_zones"]}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zones","count.index"]},"cidr_block":{"references":["var.public_subnet_cidrs","count.index"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["var.tags","var.project_name","count.index"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1,"count_expression":{"references":["var.availability_zones"]}},{"address":"aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.vpc_cidr"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["var.tags","var.project_name"]}},"schema_version":1},{"address":"aws_vpc_endpoint.s3","mode":"managed","type":"aws_vpc_endpoint","name":"s3","provider_config_key":"aws","expressions":{"route_table_ids":{"references":["aws_route_table.public.id","aws_route_table.public","aws_route_table.private"]},"service_name":{"references":["var.aws_region"]},"tags":{"references":["var.tags","var.project_name"]},"vpc_endpoint_type":{"constant_value":"Gateway"},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0}],"variables":{"api_health_check_path":{"default":"/health","description":"Health check path for API service"},"api_port":{"default":8080,"description":"Port for API target group"},"availability_zones":{"description":"List of availability zones"},"aws_region":{"description":"AWS region"},"certificate_arn":{"default":null,"description":"ARN of the ACM certificate for HTTPS"},"create_nat_gateway":{"default":true,"description":"Whether to create NAT gateways"},"enable_deletion_protection":{"default":false,"description":"Whether to enable deletion protection for the ALB"},"enable_https":{"default":false,"description":"Whether to enable HTTPS listener"},"frontend_health_check_path":{"default":"/","description":"Health check path for frontend service"},"frontend_port":{"default":3000,"description":"Port for frontend target group"},"private_subnet_cidrs":{"description":"CIDR blocks for private subnets"},"project_name":{"description":"Name of the project, used for resource naming"},"public_subnet_cidrs":{"description":"CIDR blocks for public subnets"},"tags":{"default":{},"description":"Tags to apply to all resources"},"vpc_cidr":{"default":"10.0.0.0/16","description":"CIDR block for VPC"}}}},"sagemaker":{"source":"./modules/sagemaker","expressions":{"enable_autoscaling":{"references":["var.sagemaker_enable_autoscaling"]},"error_threshold":{"constant_value":5},"inference_image_uri":{"references":["var.aws_region"]},"initial_instance_count":{"references":["var.sagemaker_initial_instance_count"]},"instance_type":{"references":["var.sagemaker_instance_type"]},"latency_threshold":{"constant_value":30000},"max_capacity":{"references":["var.sagemaker_max_capacity"]},"min_capacity":{"references":["var.sagemaker_min_capacity"]},"model_bucket_name":{"references":["var.model_bucket_name"]},"model_data_url":{"references":["var.model_data_url"]},"project_name":{"references":["var.project_name"]},"security_group_ids":{"references":["module.networking.sagemaker_security_group_id","module.networking"]},"subnet_ids":{"references":["module.networking.private_subnet_ids","module.networking"]},"tags":{"references":["var.common_tags"]},"target_invocations_per_instance":{"references":["var.sagemaker_target_invocations"]}},"module":{"outputs":{"autoscaling_policy_arn":{"expression":{"references":["var.enable_autoscaling","aws_appautoscaling_policy.sagemaker_policy[0].arn","aws_appautoscaling_policy.sagemaker_policy[0]","aws_appautoscaling_policy.sagemaker_policy"]},"description":"ARN of the auto-scaling policy (if enabled)"},"autoscaling_target_id":{"expression":{"references":["var.enable_autoscaling","aws_appautoscaling_target.sagemaker_target[0].id","aws_appautoscaling_target.sagemaker_target[0]","aws_appautoscaling_target.sagemaker_target"]},"description":"ID of the auto-scaling target (if enabled)"},"endpoint_arn":{"expression":{"references":["aws_sagemaker_endpoint.whisper.arn","aws_sagemaker_endpoint.whisper"]},"description":"ARN of the SageMaker endpoint"},"endpoint_config_arn":{"expression":{"references":["aws_sagemaker_endpoint_configuration.whisper.arn","aws_sagemaker_endpoint_configuration.whisper"]},"description":"ARN of the SageMaker endpoint configuration"},"endpoint_config_name":{"expression":{"references":["aws_sagemaker_endpoint_configuration.whisper.name","aws_sagemaker_endpoint_configuration.whisper"]},"description":"Name of the SageMaker endpoint configuration"},"endpoint_name":{"expression":{"references":["aws_sagemaker_endpoint.whisper.name","aws_sagemaker_endpoint.whisper"]},"description":"Name of the SageMaker endpoint"},"execution_role_arn":{"expression":{"references":["aws_iam_role.sagemaker_execution.arn","aws_iam_role.sagemaker_execution"]},"description":"ARN of the SageMaker execution IAM role"},"execution_role_name":{"expression":{"references":["aws_iam_role.sagemaker_execution.name","aws_iam_role.sagemaker_execution"]},"description":"Name of the SageMaker execution IAM role"},"invocation_error_alarm_arn":{"expression":{"references":["aws_cloudwatch_metric_alarm.model_invocation_errors.arn","aws_cloudwatch_metric_alarm.model_invocation_errors"]},"description":"ARN of the invocation error CloudWatch alarm"},"latency_alarm_arn":{"expression":{"references":["aws_cloudwatch_metric_alarm.model_latency.arn","aws_cloudwatch_metric_alarm.model_latency"]},"description":"ARN of the latency CloudWatch alarm"},"model_arn":{"expression":{"references":["aws_sagemaker_model.whisper.arn","aws_sagemaker_model.whisper"]},"description":"ARN of the SageMaker model"},"model_name":{"expression":{"references":["aws_sagemaker_model.whisper.name","aws_sagemaker_model.whisper"]},"description":"Name of the SageMaker model"}},"resources":[{"address":"aws_appautoscaling_policy.sagemaker_policy","mode":"managed","type":"aws_appautoscaling_policy","name":"sagemaker_policy","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name"]},"policy_type":{"constant_value":"TargetTrackingScaling"},"resource_id":{"references":["aws_appautoscaling_target.sagemaker_target[0].resource_id","aws_appautoscaling_target.sagemaker_target[0]","aws_appautoscaling_target.sagemaker_target"]},"scalable_dimension":{"references":["aws_appautoscaling_target.sagemaker_target[0].scalable_dimension","aws_appautoscaling_target.sagemaker_target[0]","aws_appautoscaling_target.sagemaker_target"]},"service_namespace":{"references":["aws_appautoscaling_target.sagemaker_target[0].service_namespace","aws_appautoscaling_target.sagemaker_target[0]","aws_appautoscaling_target.sagemaker_target"]},"target_tracking_scaling_policy_configuration":[{"predefined_metric_specification":[{"predefined_metric_type":{"constant_value":"SageMakerVariantInvocationsPerInstance"}}],"scale_in_cooldown":{"references":["var.scale_in_cooldown"]},"scale_out_cooldown":{"references":["var.scale_out_cooldown"]},"target_value":{"references":["var.target_invocations_per_instance"]}}]},"schema_version":0,"count_expression":{"references":["var.enable_autoscaling"]}},{"address":"aws_appautoscaling_target.sagemaker_target","mode":"managed","type":"aws_appautoscaling_target","name":"sagemaker_target","provider_config_key":"aws","expressions":{"max_capacity":{"references":["var.max_capacity"]},"min_capacity":{"references":["var.min_capacity"]},"resource_id":{"references":["aws_sagemaker_endpoint.whisper.name","aws_sagemaker_endpoint.whisper"]},"scalable_dimension":{"constant_value":"sagemaker:variant:DesiredInstanceCount"},"service_namespace":{"constant_value":"sagemaker"}},"schema_version":0,"count_expression":{"references":["var.enable_autoscaling"]}},{"address":"aws_cloudwatch_metric_alarm.low_invocations","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"low_invocations","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["var.alarm_actions"]},"alarm_description":{"constant_value":"Alert when endpoint receives very few invocations (possible issue)"},"alarm_name":{"references":["var.project_name"]},"comparison_operator":{"constant_value":"LessThanThreshold"},"dimensions":{"references":["aws_sagemaker_endpoint.whisper.name","aws_sagemaker_endpoint.whisper"]},"evaluation_periods":{"constant_value":3},"metric_name":{"constant_value":"Invocations"},"namespace":{"constant_value":"AWS/SageMaker"},"period":{"constant_value":300},"statistic":{"constant_value":"Sum"},"tags":{"references":["var.tags","var.project_name"]},"threshold":{"constant_value":1},"treat_missing_data":{"constant_value":"breaching"}},"schema_version":1,"count_expression":{"references":["var.enable_low_invocation_alarm"]}},{"address":"aws_cloudwatch_metric_alarm.model_invocation_errors","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"model_invocation_errors","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["var.alarm_actions"]},"alarm_description":{"constant_value":"This metric monitors SageMaker model invocation errors"},"alarm_name":{"references":["var.project_name"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_sagemaker_endpoint.whisper.name","aws_sagemaker_endpoint.whisper"]},"evaluation_periods":{"constant_value":2},"metric_name":{"constant_value":"ModelInvocationErrors"},"namespace":{"constant_value":"AWS/SageMaker"},"period":{"constant_value":60},"statistic":{"constant_value":"Sum"},"tags":{"references":["var.tags","var.project_name"]},"threshold":{"references":["var.error_threshold"]},"treat_missing_data":{"constant_value":"notBreaching"}},"schema_version":1},{"address":"aws_cloudwatch_metric_alarm.model_latency","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"model_latency","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["var.alarm_actions"]},"alarm_description":{"constant_value":"This metric monitors SageMaker model latency"},"alarm_name":{"references":["var.project_name"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_sagemaker_endpoint.whisper.name","aws_sagemaker_endpoint.whisper"]},"evaluation_periods":{"constant_value":2},"metric_name":{"constant_value":"ModelLatency"},"namespace":{"constant_value":"AWS/SageMaker"},"period":{"constant_value":60},"statistic":{"constant_value":"Average"},"tags":{"references":["var.tags","var.project_name"]},"threshold":{"references":["var.latency_threshold"]},"treat_missing_data":{"constant_value":"notBreaching"}},"schema_version":1},{"address":"aws_iam_role.sagemaker_execution","mode":"managed","type":"aws_iam_role","name":"sagemaker_execution","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["var.project_name"]},"tags":{"references":["var.tags","var.project_name"]}},"schema_version":0},{"address":"aws_iam_role_policy.sagemaker_s3_access","mode":"managed","type":"aws_iam_role_policy","name":"sagemaker_s3_access","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name"]},"policy":{"references":["var.model_bucket_name","var.model_bucket_name"]},"role":{"references":["aws_iam_role.sagemaker_execution.id","aws_iam_role.sagemaker_execution"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.sagemaker_full_access","mode":"managed","type":"aws_iam_role_policy_attachment","name":"sagemaker_full_access","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonSageMakerFullAccess"},"role":{"references":["aws_iam_role.sagemaker_execution.name","aws_iam_role.sagemaker_execution"]}},"schema_version":0},{"address":"aws_sagemaker_endpoint.whisper","mode":"managed","type":"aws_sagemaker_endpoint","name":"whisper","provider_config_key":"aws","expressions":{"endpoint_config_name":{"references":["aws_sagemaker_endpoint_configuration.whisper.name","aws_sagemaker_endpoint_configuration.whisper"]},"name":{"references":["var.project_name"]},"tags":{"references":["var.tags","var.project_name"]}},"schema_version":0},{"address":"aws_sagemaker_endpoint_configuration.whisper","mode":"managed","type":"aws_sagemaker_endpoint_configuration","name":"whisper","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name"]},"production_variants":[{"initial_instance_count":{"references":["var.initial_instance_count"]},"initial_variant_weight":{"constant_value":1},"instance_type":{"references":["var.instance_type"]},"model_name":{"references":["aws_sagemaker_model.whisper.name","aws_sagemaker_model.whisper"]},"variant_name":{"constant_value":"AllTraffic"}}],"tags":{"references":["var.tags","var.project_name"]}},"schema_version":0},{"address":"aws_sagemaker_model.whisper","mode":"managed","type":"aws_sagemaker_model","name":"whisper","provider_config_key":"aws","expressions":{"execution_role_arn":{"references":["aws_iam_role.sagemaker_execution.arn","aws_iam_role.sagemaker_execution"]},"name":{"references":["var.project_name"]},"primary_container":[{"environment":{"references":["var.model_environment"]},"image":{"references":["var.inference_image_uri"]},"model_data_url":{"references":["var.model_data_url"]}}],"tags":{"references":["var.tags","var.project_name"]},"vpc_config":[{"security_group_ids":{"references":["var.security_group_ids"]},"subnets":{"references":["var.subnet_ids"]}}]},"schema_version":0}],"variables":{"alarm_actions":{"default":[],"description":"List of ARNs to notify when alarms trigger (e.g., SNS topics)"},"enable_autoscaling":{"default":true,"description":"Whether to enable auto-scaling for the endpoint"},"enable_low_invocation_alarm":{"default":false,"description":"Whether to enable low invocation alarm"},"error_threshold":{"default":5,"description":"Threshold for model invocation errors alarm"},"inference_image_uri":{"description":"URI of the Docker image for SageMaker inference"},"initial_instance_count":{"default":1,"description":"Initial number of instances for the endpoint"},"instance_type":{"default":"ml.g4dn.xlarge","description":"Instance type for SageMaker endpoint"},"latency_threshold":{"default":30000,"description":"Threshold for model latency alarm (in milliseconds)"},"max_capacity":{"default":3,"description":"Maximum number of instances for auto-scaling"},"min_capacity":{"default":1,"description":"Minimum number of instances for auto-scaling"},"model_bucket_name":{"description":"Name of the S3 bucket containing model artifacts"},"model_data_url":{"description":"S3 URL to the model.tar.gz file"},"model_environment":{"default":{},"description":"Environment variables for the model container"},"project_name":{"description":"Name of the project, used for resource naming"},"scale_in_cooldown":{"default":300,"description":"Cooldown period (in seconds) before scaling in"},"scale_out_cooldown":{"default":60,"description":"Cooldown period (in seconds) before scaling out"},"security_group_ids":{"description":"List of security group IDs for VPC configuration"},"subnet_ids":{"description":"List of subnet IDs for VPC configuration"},"tags":{"default":{},"description":"Tags to apply to all resources"},"target_invocations_per_instance":{"default":1000,"description":"Target number of invocations per instance for auto-scaling"}}},"depends_on":["module.networking"]}},"variables":{"api_container_port":{"default":8080,"description":"Container port for API service"},"api_cpu":{"default":"512","description":"CPU units for API task"},"api_cpu_target":{"default":70,"description":"Target CPU utilization for API auto-scaling"},"api_desired_count":{"default":2,"description":"Desired number of API tasks"},"api_enable_autoscaling":{"default":true,"description":"Enable auto-scaling for API service"},"api_environment":{"default":{},"description":"Environment variables for API service"},"api_health_check_path":{"default":"/health","description":"Health check path for API service"},"api_max_capacity":{"default":10,"description":"Maximum API tasks for auto-scaling"},"api_memory":{"default":"1024","description":"Memory (MB) for API task"},"api_min_capacity":{"default":1,"description":"Minimum API tasks for auto-scaling"},"availability_zones":{"default":["eu-west-1a","eu-west-1b"],"description":"List of availability zones"},"aws_region":{"default":"eu-west-1","description":"AWS region"},"certificate_arn":{"default":null,"description":"ARN of ACM certificate for HTTPS"},"common_tags":{"default":{"Environment":"production","ManagedBy":"Terraform","Project":"whisper-sagemaker"},"description":"Common tags to apply to all resources"},"create_nat_gateway":{"default":true,"description":"Whether to create NAT gateways"},"enable_deletion_protection":{"default":false,"description":"Whether to enable deletion protection for ALB"},"enable_https":{"default":false,"description":"Whether to enable HTTPS"},"frontend_container_port":{"default":3000,"description":"Container port for frontend service"},"frontend_cpu":{"default":"256","description":"CPU units for frontend task"},"frontend_cpu_target":{"default":70,"description":"Target CPU utilization for frontend auto-scaling"},"frontend_desired_count":{"default":2,"description":"Desired number of frontend tasks"},"frontend_enable_autoscaling":{"default":true,"description":"Enable auto-scaling for frontend service"},"frontend_environment":{"default":{},"description":"Environment variables for frontend service"},"frontend_health_check_path":{"default":"/","description":"Health check path for frontend service"},"frontend_max_capacity":{"default":10,"description":"Maximum frontend tasks for auto-scaling"},"frontend_memory":{"default":"512","description":"Memory (MB) for frontend task"},"frontend_min_capacity":{"default":1,"description":"Minimum frontend tasks for auto-scaling"},"model_bucket_name":{"description":"Name of S3 bucket containing model artifacts"},"model_data_url":{"description":"S3 URL to model.tar.gz"},"private_subnet_cidrs":{"default":["10.0.11.0/24","10.0.12.0/24"],"description":"CIDR blocks for private subnets"},"project_name":{"default":"whisper-sagemaker","description":"Name of the project"},"public_subnet_cidrs":{"default":["10.0.1.0/24","10.0.2.0/24"],"description":"CIDR blocks for public subnets"},"sagemaker_enable_autoscaling":{"default":true,"description":"Enable auto-scaling for SageMaker"},"sagemaker_initial_instance_count":{"default":1,"description":"Initial instance count for SageMaker"},"sagemaker_instance_type":{"default":"ml.g4dn.xlarge","description":"Instance type for SageMaker endpoint"},"sagemaker_max_capacity":{"default":3,"description":"Maximum instances for SageMaker auto-scaling"},"sagemaker_min_capacity":{"default":1,"description":"Minimum instances for SageMaker auto-scaling"},"sagemaker_target_invocations":{"default":1000,"description":"Target invocations per instance"},"vpc_cidr":{"default":"10.0.0.0/16","description":"CIDR block for VPC"}}}},"relevant_attributes":[{"resource":"module.ecs.aws_iam_role.task_execution_role","attribute":["name"]},{"resource":"module.networking.aws_eip.nat","attribute":[]},{"resource":"module.ecr_api.aws_ecr_repository.this","attribute":["registry_id"]},{"resource":"module.ecs.aws_appautoscaling_target.api[0]","attribute":["resource_id"]},{"resource":"module.ecs.aws_ecs_task_definition.frontend","attribute":["arn"]},{"resource":"module.sagemaker.aws_sagemaker_model.whisper","attribute":["name"]},{"resource":"aws_cloudwatch_dashboard.main","attribute":["dashboard_name"]},{"resource":"module.ecr_frontend.aws_ecr_repository.this","attribute":["arn"]},{"resource":"module.ecr_frontend.aws_ecr_repository.this","attribute":["name"]},{"resource":"module.ecr_api.aws_ecr_repository.this","attribute":["repository_url"]},{"resource":"module.ecs.aws_ecs_service.api","attribute":["name"]},{"resource":"module.networking.aws_security_group.ecs","attribute":["id"]},{"resource":"module.networking.aws_lb.main","attribute":["zone_id"]},{"resource":"module.networking.aws_vpc.main","attribute":["cidr_block"]},{"resource":"module.ecr_api.aws_ecr_repository.this","attribute":["arn"]},{"resource":"module.ecs.aws_iam_role.task_role","attribute":["id"]},{"resource":"module.networking.aws_security_group.sagemaker","attribute":["id"]},{"resource":"module.ecs.aws_appautoscaling_target.api[0]","attribute":["scalable_dimension"]},{"resource":"module.networking.aws_lb.main","attribute":["arn"]},{"resource":"module.networking.aws_lb.main","attribute":["id"]},{"resource":"module.ecs.aws_ecs_cluster.main","attribute":["name"]},{"resource":"module.networking.aws_internet_gateway.main","attribute":["id"]},{"resource":"module.sagemaker.aws_iam_role.sagemaker_execution","attribute":["arn"]},{"resource":"module.sagemaker.aws_appautoscaling_policy.sagemaker_policy[0]","attribute":["arn"]},{"resource":"module.ecr_frontend.aws_ecr_repository.this","attribute":["registry_id"]},{"resource":"module.ecs.aws_appautoscaling_target.api[0]","attribute":["service_namespace"]},{"resource":"module.ecs.aws_cloudwatch_log_group.ecs_logs","attribute":["name"]},{"resource":"module.sagemaker.aws_iam_role.sagemaker_execution","attribute":["name"]},{"resource":"module.ecs.aws_appautoscaling_target.frontend[0]","attribute":["id"]},{"resource":"module.networking.aws_lb_target_group.api","attribute":["arn"]},{"resource":"module.networking.aws_nat_gateway.main","attribute":[]},{"resource":"module.networking.aws_route_table.private","attribute":[]},{"resource":"module.sagemaker.aws_cloudwatch_metric_alarm.model_invocation_errors","attribute":["arn"]},{"resource":"module.ecs.aws_ecs_cluster.main","attribute":["id"]},{"resource":"module.networking.aws_subnet.private","attribute":[]},{"resource":"module.ecr_api.aws_ecr_repository.this","attribute":["name"]},{"resource":"module.ecs.aws_ecs_service.frontend","attribute":["name"]},{"resource":"module.sagemaker.aws_sagemaker_endpoint_configuration.whisper","attribute":["name"]},{"resource":"module.ecs.aws_appautoscaling_target.frontend[0]","attribute":["scalable_dimension"]},{"resource":"module.sagemaker.aws_appautoscaling_target.sagemaker_target[0]","attribute":["resource_id"]},{"resource":"module.ecr_frontend.aws_ecr_repository.this","attribute":["repository_url"]},{"resource":"module.ecs.aws_ecs_task_definition.api","attribute":["arn"]},{"resource":"module.networking.aws_vpc.main","attribute":["id"]},{"resource":"module.ecs.aws_appautoscaling_target.frontend[0]","attribute":["service_namespace"]},{"resource":"module.ecs.aws_ecs_cluster.main","attribute":["arn"]},{"resource":"module.networking.aws_lb.main","attribute":["dns_name"]},{"resource":"module.networking.aws_security_group.alb","attribute":["id"]},{"resource":"module.ecs.aws_iam_role.task_execution_role","attribute":["arn"]},{"resource":"module.sagemaker.aws_appautoscaling_target.sagemaker_target[0]","attribute":["service_namespace"]},{"resource":"module.networking.aws_lb_listener.http","attribute":["arn"]},{"resource":"module.networking.aws_route_table.public","attribute":["id"]},{"resource":"module.sagemaker.aws_sagemaker_endpoint_configuration.whisper","attribute":["arn"]},{"resource":"module.sagemaker.aws_appautoscaling_target.sagemaker_target[0]","attribute":["scalable_dimension"]},{"resource":"module.sagemaker.aws_cloudwatch_metric_alarm.model_latency","attribute":["arn"]},{"resource":"module.ecs.aws_ecs_service.api","attribute":["id"]},{"resource":"module.sagemaker.aws_sagemaker_endpoint.whisper","attribute":["arn"]},{"resource":"module.ecs.aws_appautoscaling_target.frontend[0]","attribute":["resource_id"]},{"resource":"module.networking.aws_lb_target_group.frontend","attribute":["arn"]},{"resource":"module.networking.aws_subnet.public","attribute":[]},{"resource":"module.sagemaker.aws_sagemaker_endpoint.whisper","attribute":["name"]},{"resource":"module.ecs.aws_ecs_service.frontend","attribute":["id"]},{"resource":"module.sagemaker.aws_appautoscaling_target.sagemaker_target[0]","attribute":["id"]},{"resource":"module.ecs.aws_iam_role.task_role","attribute":["arn"]},{"resource":"module.sagemaker.aws_iam_role.sagemaker_execution","attribute":["id"]},{"resource":"module.ecs.aws_appautoscaling_target.api[0]","attribute":["id"]},{"resource":"module.sagemaker.aws_sagemaker_model.whisper","attribute":["arn"]}],"checks":[{"address":{"kind":"var","module":"module.ecr_api","name":"encryption_type","to_display":"module.ecr_api.var.encryption_type"},"status":"pass","instances":[{"address":{"module":"module.ecr_api","to_display":"module.ecr_api.var.encryption_type"},"status":"pass"}]},{"address":{"kind":"var","module":"module.ecr_api","name":"image_tag_mutability","to_display":"module.ecr_api.var.image_tag_mutability"},"status":"pass","instances":[{"address":{"module":"module.ecr_api","to_display":"module.ecr_api.var.image_tag_mutability"},"status":"pass"}]},{"address":{"kind":"var","module":"module.ecr_frontend","name":"encryption_type","to_display":"module.ecr_frontend.var.encryption_type"},"status":"pass","instances":[{"address":{"module":"module.ecr_frontend","to_display":"module.ecr_frontend.var.encryption_type"},"status":"pass"}]},{"address":{"kind":"var","module":"module.ecr_frontend","name":"image_tag_mutability","to_display":"module.ecr_frontend.var.image_tag_mutability"},"status":"pass","instances":[{"address":{"module":"module.ecr_frontend","to_display":"module.ecr_frontend.var.image_tag_mutability"},"status":"pass"}]},{"address":{"kind":"var","module":"module.sagemaker","name":"initial_instance_count","to_display":"module.sagemaker.var.initial_instance_count"},"status":"pass","instances":[{"address":{"module":"module.sagemaker","to_display":"module.sagemaker.var.initial_instance_count"},"status":"pass"}]},{"address":{"kind":"var","module":"module.sagemaker","name":"instance_type","to_display":"module.sagemaker.var.instance_type"},"status":"pass","instances":[{"address":{"module":"module.sagemaker","to_display":"module.sagemaker.var.instance_type"},"status":"pass"}]}],"timestamp":"2025-12-13T08:07:43Z","applyable":true,"complete":true,"errored":false}
